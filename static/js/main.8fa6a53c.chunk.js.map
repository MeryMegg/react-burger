{"version":3,"sources":["components/app-header/app-header.module.css","components/modal-overlay/modal-overlay.module.css","ui/price-item/price-item.module.css","components/burger-item/burger-item.module.css","pages/feed/feed.module.css","components/app/app.module.css","components/ingredient-details/ingredient-details.module.css","components/nav-bar/nav-bar.tsx","components/app-header/app-header.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/preloader/preloader.tsx","hooks.ts","components/ingredient-details/ingredient-details.tsx","constants/config.ts","utils/functions.ts","utils/api.tsx","services/constants/auth.ts","services/actions/auth.ts","pages/login/login.tsx","pages/register/register.tsx","pages/forgot-password/forgot-password.tsx","pages/reset-password/reset-password.tsx","ui/price-item/price-item.tsx","components/burger-ingredient/burger-ingredient.tsx","constants/constants.ts","components/ingredients/ingredients.tsx","components/burger-ingredients/burger-ingredients.tsx","services/constants/ingredietns.ts","services/actions/ingredients.ts","components/burger-item/burger-item.tsx","components/burger-constructor/burger-constructor.tsx","pages/main/main.tsx","components/orders-item/orders-item.tsx","components/feed-orders/feed-orders.tsx","components/orders-table/orders-table.tsx","services/constants/ws-actions.ts","pages/feed/feed.tsx","pages/order/order.tsx","components/nav-profile/nav-profile.tsx","components/forms-profile/forms-profile.tsx","services/constants/ws-actions-auth.ts","components/profile-orders/profile-orders.tsx","pages/profile/profile.tsx","components/protected-route.tsx","images/check.svg","components/order-details/order-details.tsx","components/app/app.tsx","reportWebVitals.ts","services/reducers/ingredients.ts","services/reducers/auth.ts","services/reducers/ws-reducer.ts","services/reducers/ws-reducer-auth.ts","services/reducers/index.js","services/middleware/socketMiddleware.ts","services/actions/ws-actions.ts","services/actions/ws-actions-auth.ts","store.ts","index.tsx","pages/order/order.module.css","components/nav-bar/nav-bar.module.css","components/orders-item/orders-item.module.css","components/orders-table/orders-table.module.css","components/nav-profile/nav-profile.module.css","components/order-details/order-details.module.css","pages/login/login.module.css","components/burger-constructor/burger-constructor.module.css","pages/register/register.module.css","pages/forgot-password/forgot-password.module.css","pages/reset-password/reset-password.module.css","components/ingredients/ingredients.module.css","components/burger-ingredient/burger-ingredient.module.css","components/feed-orders/feed-orders.module.css","components/forms-profile/forms-profile.module.css","components/profile-orders/profile-orders.module.css","components/modal/modal.module.css","components/preloader/preloader.module.css","components/burger-ingredients/burger-ingredients.module.css","pages/main/main.module.css","pages/profile/profile.module.css"],"names":["module","exports","NavBar","isConstructor","useRouteMatch","path","exact","isFeed","isProfile","className","cn","styles","menu","to","link","activeClassName","link_active","type","logo","memo","AppHeader","header","ModalOverlay","children","close","overlay","onClick","modalRoot","document","querySelector","Modal","history","useHistory","closeEsc","evn","code","goBack","useEffect","window","addEventListener","removeEventListener","ReactDOM","createPortal","popup","popup__close","Preloader","useDispatch","dispatchHook","useSelector","selectorHook","IngredientDetails","allIngredients","store","ingredients","id","useParams","currentBurger","length","find","el","_id","content","content__title","content__product","src","image","alt","content__image","content__text","name","list","list__item","calories","proteins","fat","carbohydrates","ServerConfig","baseUrl","headers","calculationCost","bun","arrOtherIngredients","price","reduce","acc","curr","getCookie","matches","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","props","exp","expires","d","Date","setTime","getTime","Number","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","deleteCookie","conversionDateForCard","date","dayCreated","today","setHours","days","diffTime","Math","ceil","hours","getHours","min","getMinutes","getTimezoneOffset","getStatus","status","text","textColor","getPrice","arr","getBurgerIngredients","arrIdBurgerIngredients","arrAllIngredients","map","filter","item","flat","resetPasswordRequest","password","token","fetch","method","mode","cache","credentials","body","JSON","stringify","redirect","referrerPolicy","then","res","requestHandler","refreshTokenRequest","localStorage","getItem","fetchWithRefreshToken","url","options","catch","json","err","console","log","message","setItem","refreshToken","authToken","accessToken","split","Authorization","removeItem","location","reload","Promise","reject","ok","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILED","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILED","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILED","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILED","UPDATE_USER_REQUEST","UPDATE_USER_SUCCESS","UPDATE_USER_FAILED","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","FORGOT_PASSWORD_FAILED","RESET_PASSWORD_REQUEST","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_FAILED","REFRESH_TOKEN_REQUEST","REFRESH_TOKEN_SUCCESS","REFRESH_TOKEN_FAILED","register","state","dispatch","email","signUpRequest","success","user","push","login","signInRequest","getUser","updateUser","data","updateUserRequest","forgotPassword","forgotPasswordRequest","logout","Login","useState","setState","userName","auth","handleInputChange","event","target","hasToken","pathname","container","onSubmit","e","preventDefault","form","title","placeholder","onChange","error","errorText","size","Register","onIconClick","useCallback","alert","ForgotPassword","setValue","ResetPassword","isforgotPasswordSaccess","resetPassword","PriceItem","classMarg","BurgerIngredient","useDrag","collect","monitor","isDrag","isDragging","dragRef","burgerIngredients","counts","count","opacity","card","ref","style","data-cy","image_large","container__description","Ingredients","React","forwardRef","array","useLocation","ingredients__title","background","BurgerIngredients","current","setCurrent","main","sauce","rootRef","useRef","bunRef","sauceRef","mainRef","scrollIntoView","active","onScroll","bunDistance","abs","getBoundingClientRect","top","sauceDistance","mainDistance","minDistance","currentHeader","prevState","GET_PRODUCTS_REQUEST","GET_PRODUCTS_SUCCESS","GET_PRODUCTS_FAILED","INCREASE_INGREDIENT","DECREASE_INGREDIENT","DELETE_INGREDIENT","ADD_INGREDIENTS","UPDATE_CONSTRUCTOR","CREATE_ORDER_REQUEST","CREATE_ORDER_SUCCESS","CREATE_ORDER_FAILED","GET_ORDER_REQUEST","GET_ORDER_SUCCESS","GET_ORDER_FAILED","GET_USER_ORDER_REQUEST","GET_USER_ORDER_SUCCESS","GET_USER_ORDER_FAILED","getIngredients","items","getOrder","number","order","orders","getUserOrder","createOrder","ingredientsId","BurgerItem","index","deleteIngredient","moveItem","useDrop","accept","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","bottom","hoverClientY","getClientOffset","y","drop","drag","thumbnail","handleClose","BurgerConstructor","onDropHandler","otherIngredients","orderRequest","isHover","isOver","canDrop","dropTarget","classModificator","toIndex","fromIndex","isLocked","i","productId","key","typeItem","bunId","Main","isLoading","hasError","loaded","DndProvider","backend","HTML5Backend","columns","newItem","uuidv4","OrdersItem","createdAt","stringWithDay","burgerItem","slice","zI","numberIngredients","burgerPrice","st","zIndex","icon","image_mobile","FeedOrders","ws","OrdersTable","total","totalToday","statusArrays","done","pending","doneArray","table","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_CONNECTION_CLOSE","WS_GET_MESSAGE","Feed","Order","currentOrder","orderLoaded","arrUniqItem","Array","from","Set","bI","ingredient","info","NewProfile","nav","FormsProfile","currentUserName","currentUserEmail","nameDisabled","emailDisabled","passwordDisabled","nameInputRef","emailInputRef","passwordInputRef","iconNameInput","emailNameInput","passwordNameInput","disabled","setTimeout","focus","buttons","button","WS_CONNECTION_START_AUTH","WS_CONNECTION_SUCCESS_AUTH","WS_CONNECTION_ERROR_AUTH","WS_CONNECTION_CLOSED_AUTH","WS_CONNECTION_CLOSE_AUTH","WS_GET_MESSAGE_AUTH","ProfileOrders","wsAuth","Profile","getUserRequest","ProtectedRoute","rest","isTokenUpdated","tokenUpdateDate","render","OrderDetails","orderFailed","order__title","order__text","checkIcon","order__image","App","action","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","registerRequest","registerFailed","loginRequest","loginFailed","updateUserFailed","logoutRequest","logoutFailed","getUserFailed","forgotPasswordFailed","isforgotPasswordRequest","resetPasswordFailed","wsConnected","createBrowserHistory","rootReducer","combineReducers","splice","payload","router","connectRouter","socketMiddleware","wsUrl","wsActions","socket","connected","next","wsInit","wsClose","wsSendMessage","onOpen","onClose","onError","onMessage","WebSocket","onopen","onerror","onmessage","parsedData","parse","restParsedData","onclose","send","wsActionsAuth","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","routerMiddleware","createStore","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8fa6a53c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__3frDK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__32sa_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"element-price\":\"price-item_element-price__mn0vU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"burger-item_item__y3ZG8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"columns\":\"feed_columns__33RR5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"app_container__1x0he\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ingredient-details_content__MvnZi\",\"list\":\"ingredient-details_list__1i_Rf\",\"content__text\":\"ingredient-details_content__text__oIuju\",\"content__product\":\"ingredient-details_content__product__3Pwgc\",\"list__item\":\"ingredient-details_list__item__F75LD\",\"list__item-text\":\"ingredient-details_list__item-text__2Wt48\"};","import React, { memo } from 'react';\nimport cn from 'classnames';\nimport {\n  BurgerIcon,\n  ListIcon,\n  ProfileIcon,\n  Logo,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { NavLink, useRouteMatch } from 'react-router-dom';\nimport styles from './nav-bar.module.css';\n\nconst NavBar = () => {\n  const isConstructor = !!useRouteMatch({ path: '/', exact: true });\n  const isFeed = !!useRouteMatch('/feed');\n  const isProfile = !!useRouteMatch('/profile');\n  return <div className={cn(styles['nav-bar'])}>\n    <div className={cn(styles.menu)}>\n      <NavLink\n        exact\n        to='/'\n        className={cn(styles.link, 'pt-4', 'pb-4', 'pr-5', 'mr-2')}\n        activeClassName={styles.link_active}\n      >\n        <BurgerIcon type={isConstructor ? 'primary' : 'secondary'} />\n        <span className={cn('ml-2')}>Конструктор</span>\n      </NavLink>\n      <NavLink\n        to='/feed'\n        activeClassName={styles.link_active}\n        className={cn(styles.link, 'pt-4', 'pb-4', 'pr-5', 'pl-5')}\n      >\n        <ListIcon type={isFeed ? 'primary' : 'secondary'} />\n        <span className={cn('ml-2')}>Лента заказов</span>\n      </NavLink>\n    </div>\n    <NavLink\n      exact\n      to='/'\n      activeClassName={styles.link_active}\n      className={cn(styles.logo)}\n    >\n      <Logo />\n    </NavLink>\n    <NavLink\n      to='/profile'\n      activeClassName={styles.link_active}\n      className={cn(styles.link)}\n    >\n      <ProfileIcon type={isProfile ? 'primary' : 'secondary'} />\n      <span className={cn('pt-4', 'pb-4', 'pl-5')}>Личный кабинет</span>\n    </NavLink>\n  </div>;\n}\n\nexport default memo(NavBar);\n","import React, { memo } from 'react';\nimport cn from 'classnames';\nimport NavBar from '../nav-bar/nav-bar';\nimport styles from './app-header.module.css';\n\nfunction AppHeader() {\n  return (\n    <header\n      className={cn(\n        'pl-10',\n        'pr-10',\n        'pt-4',\n        'pb-4',\n        'text',\n        'text_type_main-default',\n        styles.header\n      )}\n    >\n      <NavBar />\n    </header>\n  );\n}\n\nexport default memo(AppHeader);\n","import React, { FC } from 'react';\nimport cn from 'classnames';\nimport styles from './modal-overlay.module.css';\nimport { TProps } from './types';\n\n\nconst ModalOverlay: FC<TProps> = ({ children, close }) => {\n  return (\n    <div className={cn(styles.overlay)} onClick={close}>\n      {children}\n    </div>\n  );\n}\n\nexport default ModalOverlay;\n","import React, { useEffect, FC } from 'react';\nimport ReactDOM from 'react-dom';\nimport cn from 'classnames';\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport ModalOverlay from '../modal-overlay/modal-overlay';\nimport styles from './modal.module.css';\nimport { useHistory } from \"react-router-dom\";\n\nconst modalRoot: Element | null = document.querySelector('#react-modals');\n\nconst Modal: FC = ({ children }) => {\n  const history = useHistory();\n\n  const closeEsc = (evn: KeyboardEvent) => {\n    if (evn.code === 'Escape') close();\n  };\n\n  const close = () => {\n    history.goBack();\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', closeEsc);\n    return () => {\n      window.removeEventListener('keydown', closeEsc);\n    };\n  });\n\n  return modalRoot && ReactDOM.createPortal(\n    <>\n      <div className={cn(styles.popup, 'pr-10', 'pl-10', 'pt-15', 'pb-15')}>\n        <span className={cn(styles.popup__close)} onClick={close}>\n          <CloseIcon type='primary' />\n        </span>\n        <div>{children}</div>\n      </div>\n      <ModalOverlay close={close} />\n    </>,\n    modalRoot,\n  );\n}\n\nexport default Modal;\n","import React from 'react';\nimport styles from './preloader.module.css';\nimport cn from 'classnames';\n\nconst Preloader = () => {\n\treturn (<div className={cn(styles[\"mk-spinner-wrap\"])}>\n\t\t<div className={styles[\"mk-spinner-bubbles\"]}></div>\n\t</div>)\n}\n\nexport default Preloader;\n\n","import {\r\n\tTypedUseSelectorHook,\r\n\tuseDispatch as dispatchHook,\r\n\tuseSelector as selectorHook\r\n} from 'react-redux';\r\nimport { AppDispatch, AppThunk, RootState } from './types';\r\n\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;","import React, { memo } from 'react';\nimport cn from 'classnames';\nimport styles from './ingredient-details.module.css';\nimport { useParams } from \"react-router-dom\";\nimport Preloader from '../preloader/preloader';\nimport { TIngredient } from '../../types';\nimport { useSelector } from '../../hooks';\n\nconst IngredientDetails = () => {\n  const { allIngredients } = useSelector((store) => store.ingredients)\n  let { id } = useParams<{ id: string }>();\n  const currentBurger = allIngredients.length ? allIngredients?.find((el: TIngredient) => el._id === id) : null\n\n  if (!currentBurger) {\n    return (<Preloader />)\n  }\n\n  return (\n    <div className={cn(styles.content)}>\n      <h1\n        className={cn(\n          styles.content__title,\n          'text',\n          'text_type_main-large',\n          'mb-5'\n        )}\n      >\n        Детали ингредиента\n      </h1>\n      <div className={cn(styles.content__product, 'pr-15', 'pl-15')}>\n        <img src={currentBurger.image} alt='иконка' className={cn(styles.content__image)} />\n        <h2\n          className={cn(\n            styles.content__text,\n            'text',\n            'text_type_main-medium',\n            'mt-4'\n          )}\n        >\n          {' '}\n          {currentBurger.name}\n        </h2>\n        <p\n          className={cn(\n            styles.content__text,\n            'text',\n            'text_type_main-default',\n            'mt-8',\n            'mb-8'\n          )}\n        >\n          Здесь будет описание\n        </p>\n        <ul className={cn(styles.list)}>\n          <li\n            className={cn(\n              styles.list__item,\n              'text',\n              'text_type_main-default',\n              'text_color_inactive'\n            )}\n          >\n            <p className={cn(styles['list__item-text'])}>Калории, ккал</p>\n            <span className={cn('mt-2', 'text_type_digits-default')}>\n              {currentBurger.calories}\n            </span>\n          </li>\n          <li\n            className={cn(\n              styles.list__item,\n              'text',\n              'text_type_main-default',\n              'text_color_inactive'\n            )}\n          >\n            <p className={cn(styles['list__item-text'])}>Белки, г</p>\n            <span className={cn('mt-2', 'text_type_digits-default')}>\n              {currentBurger.proteins}\n            </span>\n          </li>\n          <li\n            className={cn(\n              styles.list__item,\n              'text',\n              'text_type_main-default',\n              'text_color_inactive'\n            )}\n          >\n            <p className={cn(styles['list__item-text'])}>Жиры, г</p>\n            <span className={cn('mt-2', 'text_type_digits-default')}>\n              {currentBurger.fat}\n            </span>\n          </li>\n          <li\n            className={cn(\n              styles.list__item,\n              'text',\n              'text_type_main-default',\n              'text_color_inactive'\n            )}\n          >\n            <p className={cn(styles['list__item-text'])}>Углеводы, г</p>\n            <span className={cn('mt-2', 'text_type_digits-default')}>\n              {currentBurger.carbohydrates}\n            </span>\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n\n\nexport default memo(IngredientDetails);\n","export const ServerConfig = {\n  baseUrl: 'https://norma.nomoreparties.space/api',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n};\n\nexport const WS_URL = 'wss://norma.nomoreparties.space/orders/all';\nexport const WS_URL_AUTH = 'wss://norma.nomoreparties.space/orders';\n","import { TIngredient, TIngredientWithProductId, TOrder, TSetCookieProps } from \"../types\";\n\n//получаем объект с разбитием по ингредиентам\nexport const filterArray = (arr: Array<TIngredient>) => {\n  return arr.reduce(\n    (acc: { [name: string]: Array<TIngredient> }, curr) => ({\n      ...acc,\n      [curr.type]: [...(acc[curr.type] || []), curr],\n    }),\n    {}\n  );\n};\n\n//вычисляем стоимость заказа для главной страницы\nexport const calculationCost = (bun: TIngredientWithProductId | null, arrOtherIngredients: Array<TIngredientWithProductId>) => {\n  const bunPrice = bun ? bun.price : 0;\n  return (\n    bunPrice * 2 +\n    arrOtherIngredients.reduce((acc, curr) => (acc += curr.price), 0)\n  );\n};\n\n//получить куки\nexport const getCookie = (name: string) => {\n  const matches = document.cookie.match(\n    new RegExp(\n      '(?:^|; )' +\n      name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') +\n      '=([^;]*)'\n    )\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n};\n\n//установить куки\nexport const setCookie = (name: string, value: string | number | boolean, props?: TSetCookieProps) => {\n  props = {\n    path: '/',\n    ...props,\n  };\n  let exp = props.expires;\n  const d = new Date();\n  if (typeof exp == 'number' && exp) {\n    d.setTime(d.getTime() + exp * 1000);\n    exp = props.expires = Number(d);\n  }\n  if (exp && d.toUTCString) {\n    props.expires = d.toUTCString();\n  }\n  value = encodeURIComponent(value);\n  let updatedCookie = name + '=' + value;\n  for (const propName in props) {\n    updatedCookie += '; ' + propName;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += '=' + propValue;\n    }\n  }\n  document.cookie = updatedCookie;\n};\n\n//удалить куки\nexport const deleteCookie = (name: string) => {\n  setCookie(name, false, { expires: -1 });\n};\n\n//получить дату создания заказа\nconst getDaysForCard = (days: number) => (\n  days === 0 ? 'Сегодня'\n    : days === 1 ? 'Вчера'\n      : days > 1 ? `${days} дня(-ей) назад`\n        : 'Что-то пошло не так:(');\n\n//сформировать тату создания заказа для карточки\nexport const conversionDateForCard = (date: string) => {\n  const dayCreated: Date = new Date(date);\n  const today: Date = new Date();\n  today.setHours(0, 0, 0, 0);\n  const diffTime: number = Math.ceil((today.getTime() - dayCreated.getTime()) / (60 * 60 * 24 * 1000));\n  const hours = dayCreated.getHours() > 9 ? dayCreated.getHours() : `0${dayCreated.getHours()}`\n  const min = dayCreated.getMinutes() > 9 ? dayCreated.getMinutes() : `0${dayCreated.getMinutes()}`\n\n  return `${getDaysForCard(diffTime)}, ${hours}:${min} i-GMT+${dayCreated.getTimezoneOffset() * (-1) / 60}`;\n};\n\n//сортировка заказов по статусу\nexport const filterOrdersByStatus = (arr: Array<TOrder>) => {\n  return arr?.reduce((acc: { [name: string]: Array<TOrder> }, curr) => {\n    curr.status === 'done' ? acc['done'] = [...acc['done'], curr] : acc['pending'] = [...acc['pending'], curr]\n    return acc;\n  }, { done: [], pending: [] })\n}\n\n//сформировать статус заказа\nexport const getStatus = (status: string) => {\n  return status === 'done'\n    ? { text: 'Выполнен', textColor: 'green' }\n    : status === 'pending'\n      ? { text: 'Отменен', textColor: 'yellow' }\n      : { text: 'Готовится', textColor: 'white' };\n}\n\n//найти текущий заказ\nexport const filterOrders = (arr: Array<TOrder>, id: string) => {\n  return arr?.filter((el: TOrder) => el.number === Number(id))[0]\n}\n\n//получить стоимость бургера\nexport const getPrice = (arr: Array<TIngredient>) => arr?.reduce((acc: number, curr: TIngredient) => acc += curr.price, 0)\n\n//получить ингредиенты бургера\nexport const getBurgerIngredients = (arrIdBurgerIngredients: Array<string>, arrAllIngredients: Array<TIngredient>) => (\n  arrIdBurgerIngredients?.map((id: string) => (\n    arrAllIngredients.filter((item: TIngredient) => item._id === id))))?.flat()\n\ntype TGetBurgerIngredientsObjWithCountReduceAcc = {\n  item: { [name: string]: TIngredient }, count: { [name: string]: number }\n}\n\n//получить объект со ингредиентами и их количеством\nexport const getBurgerIngredientsObjWithCount = (arr: Array<TIngredient>) => arr?.reduce((acc: TGetBurgerIngredientsObjWithCountReduceAcc, curr: TIngredient) => {\n  const id = curr._id\n  acc.item[id] = curr;\n  acc.count[id] = (acc.count[id] || 0) + 1\n  return acc\n}\n  , { item: {}, count: {} })\n\n","import { ServerConfig } from '../constants/config';\nimport { getCookie, setCookie, deleteCookie } from './functions';\nimport { TUserData, TResetPassword, TUpdateUserData, TError } from '../types';\n\nexport const getProductsRequest = () => {\n  return fetch(`${ServerConfig.baseUrl}/ingredients`, {\n    method: 'GET',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: ServerConfig.headers,\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n  }).then((res) => requestHandler(res));\n};\n\nexport const getOrderRequest = (number: string) => {\n  return fetch(`${ServerConfig.baseUrl}/orders/${number}`, {\n    method: 'GET',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: ServerConfig.headers,\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n  }).then((res) => requestHandler(res));\n};\n\nexport const getUserOrderRequest = (number: string) => {\n  return fetchWithRefreshToken(`${ServerConfig.baseUrl}/orders/${number}`, {\n    method: 'GET',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: {\n      ...ServerConfig.headers,\n      Authorization: 'Bearer ' + getCookie('token'),\n    },\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n  })\n};\n\nexport const getUserRequest = () => {\n  return fetchWithRefreshToken(`${ServerConfig.baseUrl}/auth/user`, {\n    method: 'GET',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: {\n      ...ServerConfig.headers,\n      Authorization: 'Bearer ' + getCookie('token'),\n    },\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n  })\n};\n\nexport const addOrdersRequest = (ingredients: Array<string>) => {\n  return fetchWithRefreshToken(`${ServerConfig.baseUrl}/orders`, {\n    method: 'POST',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: {\n      ...ServerConfig.headers,\n      Authorization: 'Bearer ' + getCookie('token'),\n    },\n    body: JSON.stringify({ ingredients }),\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n  })\n};\n\nexport const signUpRequest = ({ email, password, name }: TUserData) => {\n  return fetch(`${ServerConfig.baseUrl}/auth/register`, {\n    method: 'POST',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: ServerConfig.headers,\n    body: JSON.stringify({ email, password, name }),\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n  }).then((res) => requestHandler(res));\n};\n\nexport const signInRequest = ({ email, password }: TUserData) => {\n  return fetch(`${ServerConfig.baseUrl}/auth/login`, {\n    method: 'POST',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: ServerConfig.headers,\n    body: JSON.stringify({ email, password }),\n  }).then((res) => requestHandler(res));\n};\n\nexport const forgotPasswordRequest = (email: string) => {\n  return fetch(`${ServerConfig.baseUrl}/password-reset`, {\n    method: 'POST',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: ServerConfig.headers,\n    body: JSON.stringify({ email }),\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n  }).then((res) => requestHandler(res));\n};\n\n\n\nexport const resetPasswordRequest = ({ password, token }: TResetPassword) => {\n  return fetch(`${ServerConfig.baseUrl}/password-reset/reset`, {\n    method: 'POST',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: ServerConfig.headers,\n    body: JSON.stringify({ password, token }),\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n  }).then((res) => requestHandler(res));\n};\n\nexport const signOutRequest = () => {\n  return fetch(`${ServerConfig.baseUrl}/auth/logout`, {\n    method: 'POST',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: ServerConfig.headers,\n    body: JSON.stringify({ token: localStorage.getItem('refreshToken') }),\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n  }).then((res) => requestHandler(res));\n};\n\nexport const updateUserRequest = (data: TUpdateUserData) => {\n  return fetchWithRefreshToken(`${ServerConfig.baseUrl}/auth/user`, {\n    method: 'PATCH',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: {\n      ...ServerConfig.headers,\n      Authorization: 'Bearer ' + getCookie('token'),\n    },\n    body: JSON.stringify(data),\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n  })\n};\n\nexport const refreshTokenRequest = () => {\n  return fetch(`${ServerConfig.baseUrl}/auth/token`, {\n    method: 'POST',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: ServerConfig.headers,\n    body: JSON.stringify({ token: localStorage.getItem('refreshToken') }),\n  }).then((res) => requestHandler(res));\n};\n\nconst fetchWithRefreshToken = (url: string, options: RequestInit) => {\n  return fetch(url, options).then((res) => requestHandler(res))\n    .catch((res: Response) => {\n      return res.json()\n        .then((err: TError) => {\n          console.log(err)\n          if (err?.message === 'jwt expired') {\n            return refreshTokenRequest()\n              .then(res => {\n                localStorage.setItem('refreshToken', res.refreshToken)\n                const authToken = res.accessToken.split('Bearer ')[1];\n                setCookie('token', authToken);\n                (options.headers as { [key: string]: string }).Authorization = res.accessToken\n                return fetch(url, options).then((res) => requestHandler(res))\n              })\n          } else {\n            deleteCookie('token');\n            localStorage.removeItem('refreshToken');\n            // eslint-disable-next-line\n            location.reload()\n            return Promise.reject(err)\n          }\n        })\n    })\n}\n\nconst requestHandler = (res: Response) => {\n  return res.ok ? res.json() : Promise.reject(res)\n};\n","export const REGISTER_REQUEST: 'REGISTER_REQUEST' = 'REGISTER_REQUEST';\r\nexport const REGISTER_SUCCESS: 'REGISTER_SUCCESS' = 'REGISTER_SUCCESS';\r\nexport const REGISTER_FAILED: 'REGISTER_FAILED' = 'REGISTER_FAILED';\r\n\r\nexport const LOGIN_REQUEST: 'LOGIN_REQUEST' = 'LOGIN_REQUEST';\r\nexport const LOGIN_SUCCESS: 'LOGIN_SUCCESS' = 'LOGIN_SUCCESS';\r\nexport const LOGIN_FAILED: 'LOGIN_FAILED' = 'LOGIN_FAILED';\r\n\r\nexport const LOGOUT_REQUEST: 'LOGOUT_REQUEST' = 'LOGOUT_REQUEST';\r\nexport const LOGOUT_SUCCESS: 'LOGOUT_SUCCESS' = 'LOGOUT_SUCCESS';\r\nexport const LOGOUT_FAILED: 'LOGOUT_FAILED' = 'LOGOUT_FAILED';\r\n\r\nexport const GET_USER_REQUEST: 'GET_USER_REQUEST' = 'GET_USER_REQUEST';\r\nexport const GET_USER_SUCCESS: 'GET_USER_SUCCESS' = 'GET_USER_SUCCESS';\r\nexport const GET_USER_FAILED: 'GET_USER_FAILED' = 'GET_USER_FAILED';\r\n\r\nexport const UPDATE_USER_REQUEST: 'UPDATE_USER_REQUEST' = 'UPDATE_USER_REQUEST';\r\nexport const UPDATE_USER_SUCCESS: 'UPDATE_USER_SUCCESS' = 'UPDATE_USER_SUCCESS';\r\nexport const UPDATE_USER_FAILED: 'UPDATE_USER_FAILED' = 'UPDATE_USER_FAILED';\r\n\r\nexport const FORGOT_PASSWORD_REQUEST: 'FORGOT_PASSWORD_REQUEST' = 'FORGOT_PASSWORD_REQUEST';\r\nexport const FORGOT_PASSWORD_SUCCESS: 'FORGOT_PASSWORD_SUCCESS' = 'FORGOT_PASSWORD_SUCCESS';\r\nexport const FORGOT_PASSWORD_FAILED: 'FORGOT_PASSWORD_FAILED' = 'FORGOT_PASSWORD_FAILED';\r\n\r\nexport const RESET_PASSWORD_REQUEST: 'RESET_PASSWORD_REQUEST' = 'RESET_PASSWORD_REQUEST';\r\nexport const RESET_PASSWORD_SUCCESS: 'RESET_PASSWORD_SUCCESS' = 'RESET_PASSWORD_SUCCESS';\r\nexport const RESET_PASSWORD_FAILED: 'RESET_PASSWORD_FAILED' = 'RESET_PASSWORD_FAILED';\r\n\r\nexport const REFRESH_TOKEN_REQUEST: 'REFRESH_TOKEN_REQUEST' = 'REFRESH_TOKEN_REQUEST';\r\nexport const REFRESH_TOKEN_SUCCESS: 'REFRESH_TOKEN_SUCCESS' = 'REFRESH_TOKEN_SUCCESS';\r\nexport const REFRESH_TOKEN_FAILED: 'REFRESH_TOKEN_FAILED' = 'REFRESH_TOKEN_FAILED';","import {\n\tsignInRequest,\n\tsignUpRequest,\n\tsignOutRequest,\n\tgetUserRequest,\n\trefreshTokenRequest,\n\tupdateUserRequest,\n\tforgotPasswordRequest,\n\tresetPasswordRequest,\n} from '../../utils/api';\nimport { deleteCookie, setCookie } from '../../utils/functions';\nimport { push } from 'connected-react-router';\nimport { TUser, TUserData } from '../../types';\nimport {\n\tREGISTER_REQUEST, REGISTER_SUCCESS, REGISTER_FAILED,\n\tLOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILED,\n\tGET_USER_REQUEST, GET_USER_SUCCESS, GET_USER_FAILED,\n\tUPDATE_USER_REQUEST, UPDATE_USER_SUCCESS, UPDATE_USER_FAILED,\n\tFORGOT_PASSWORD_REQUEST, FORGOT_PASSWORD_SUCCESS, FORGOT_PASSWORD_FAILED,\n\tRESET_PASSWORD_REQUEST, RESET_PASSWORD_SUCCESS, RESET_PASSWORD_FAILED,\n\tLOGOUT_REQUEST, LOGOUT_SUCCESS, LOGOUT_FAILED,\n\tREFRESH_TOKEN_REQUEST, REFRESH_TOKEN_SUCCESS, REFRESH_TOKEN_FAILED\n} from '../constants/auth';\nimport { AppDispatch, AppThunk } from '../../types';\n\n/***/\nexport interface IRegisterRequestAction {\n\treadonly type: typeof REGISTER_REQUEST;\n}\n\nexport interface IRegisterSuccessAction {\n\treadonly type: typeof REGISTER_SUCCESS;\n\treadonly user: TUser;\n}\n\nexport interface IRegisterFailedAction {\n\treadonly type: typeof REGISTER_FAILED;\n}\n\n/***/\nexport interface ILoginRequestAction {\n\treadonly type: typeof LOGIN_REQUEST;\n}\n\nexport interface ILoginSuccessAction {\n\treadonly type: typeof LOGIN_SUCCESS;\n\treadonly user: TUser;\n}\n\nexport interface ILoginFailedAction {\n\treadonly type: typeof LOGIN_FAILED;\n}\n\n/***/\nexport interface IGetUserRequestAction {\n\treadonly type: typeof GET_USER_REQUEST;\n}\n\nexport interface IGetUserSuccessAction {\n\treadonly type: typeof GET_USER_SUCCESS;\n\treadonly user: TUser;\n}\n\nexport interface IGetUserFailedAction {\n\treadonly type: typeof GET_USER_FAILED;\n}\n\n/***/\nexport interface IUpdateUserRequestAction {\n\treadonly type: typeof UPDATE_USER_REQUEST;\n}\n\nexport interface IUpdateUserSuccessAction {\n\treadonly type: typeof UPDATE_USER_SUCCESS;\n\treadonly user: TUser;\n}\n\nexport interface IUpdateUserFailedAction {\n\treadonly type: typeof UPDATE_USER_FAILED;\n}\n\n/***/\nexport interface IForgotPasswordRequestAction {\n\treadonly type: typeof FORGOT_PASSWORD_REQUEST;\n}\n\nexport interface IForgotPasswordSuccessAction {\n\treadonly type: typeof FORGOT_PASSWORD_SUCCESS;\n}\n\nexport interface IForgotPasswordFailedAction {\n\treadonly type: typeof FORGOT_PASSWORD_FAILED;\n}\n\n/***/\nexport interface IResetPasswordRequestAction {\n\treadonly type: typeof RESET_PASSWORD_REQUEST;\n}\n\nexport interface IResetPasswordSuccessAction {\n\treadonly type: typeof RESET_PASSWORD_SUCCESS;\n}\n\nexport interface IResetPasswordFailedAction {\n\treadonly type: typeof RESET_PASSWORD_FAILED;\n}\n\n/***/\nexport interface ILogoutRequestAction {\n\treadonly type: typeof LOGOUT_REQUEST;\n}\n\nexport interface ILogoutSuccessAction {\n\treadonly type: typeof LOGOUT_SUCCESS;\n}\n\nexport interface ILogoutFailedAction {\n\treadonly type: typeof LOGOUT_FAILED;\n}\n\n/***/\nexport interface IRefreshTokenRequestAction {\n\treadonly type: typeof REFRESH_TOKEN_REQUEST;\n}\n\nexport interface IRefreshTokenSuccessAction {\n\treadonly type: typeof REFRESH_TOKEN_SUCCESS;\n}\n\nexport interface IRefreshTokenFailedAction {\n\treadonly type: typeof REFRESH_TOKEN_FAILED;\n}\n\nexport type TAuthActions =\n\t| IRegisterRequestAction\n\t| IRegisterSuccessAction\n\t| IRegisterFailedAction\n\t| ILoginRequestAction\n\t| ILoginSuccessAction\n\t| ILoginFailedAction\n\t| IGetUserRequestAction\n\t| IGetUserFailedAction\n\t| IGetUserSuccessAction\n\t| IUpdateUserRequestAction\n\t| IUpdateUserSuccessAction\n\t| IUpdateUserFailedAction\n\t| IForgotPasswordRequestAction\n\t| IForgotPasswordSuccessAction\n\t| IForgotPasswordFailedAction\n\t| IResetPasswordRequestAction\n\t| IResetPasswordSuccessAction\n\t| IResetPasswordFailedAction\n\t| ILogoutRequestAction\n\t| ILogoutFailedAction\n\t| ILogoutSuccessAction\n\t| IRefreshTokenRequestAction\n\t| IRefreshTokenSuccessAction\n\t| IRefreshTokenFailedAction;\n\n//Регистрация\nexport const register: AppThunk = (state: TUserData) => {\n\treturn function (dispatch: AppDispatch) {\n\t\tdispatch({\n\t\t\ttype: REGISTER_REQUEST,\n\t\t});\n\t\tsignUpRequest(state)\n\t\t\t.then((res) => {\n\t\t\t\tif (res && res.success) {\n\t\t\t\t\tconst authToken = res.accessToken.split('Bearer ')[1];\n\t\t\t\t\tconst refreshToken = res.refreshToken;\n\t\t\t\t\tsetCookie('token', authToken);\n\t\t\t\t\tlocalStorage.setItem('refreshToken', refreshToken);\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: REGISTER_SUCCESS,\n\t\t\t\t\t\tuser: res.user,\n\t\t\t\t\t});\n\t\t\t\t\tdispatch(push('/'));\n\t\t\t\t} else {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: REGISTER_FAILED,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: REGISTER_FAILED,\n\t\t\t\t});\n\t\t\t});\n\t};\n};\n\n//Вход в систему\nexport const login: AppThunk = (state) => {\n\treturn function (dispatch: AppDispatch) {\n\t\tdispatch({\n\t\t\ttype: LOGIN_REQUEST,\n\t\t});\n\t\tsignInRequest(state)\n\t\t\t.then((res) => {\n\t\t\t\tif (res && res.success) {\n\t\t\t\t\tconst authToken = res.accessToken.split('Bearer ')[1];\n\t\t\t\t\tconst refreshToken = res.refreshToken;\n\t\t\t\t\tsetCookie('token', authToken);\n\t\t\t\t\tlocalStorage.setItem('refreshToken', refreshToken);\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: LOGIN_SUCCESS,\n\t\t\t\t\t\tuser: res.user,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: LOGIN_FAILED,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: LOGIN_FAILED,\n\t\t\t\t});\n\t\t\t});\n\t};\n};\n\n//Запрос данных пользователя\nexport const getUser: AppThunk = () => {\n\treturn function (dispatch: AppDispatch) {\n\t\tdispatch({\n\t\t\ttype: GET_USER_REQUEST,\n\t\t});\n\t\tgetUserRequest()\n\t\t\t.then((res) => {\n\t\t\t\tif (res && res.success) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: GET_USER_SUCCESS,\n\t\t\t\t\t\tuser: res.user,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthrow res;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((res) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: GET_USER_FAILED,\n\t\t\t\t});\n\t\t\t});\n\t};\n};\n\n//Обновление данных пользователя\nexport const updateUser: AppThunk = (data) => {\n\treturn function (dispatch: AppDispatch) {\n\t\tdispatch({\n\t\t\ttype: UPDATE_USER_REQUEST,\n\t\t});\n\t\tupdateUserRequest(data)\n\t\t\t.then((res) => {\n\t\t\t\tif (res && res.success) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: UPDATE_USER_SUCCESS,\n\t\t\t\t\t\tuser: res.user,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthrow res;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((res) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: UPDATE_USER_FAILED,\n\t\t\t\t});\n\t\t\t});\n\t};\n};\n\n//Запрос на смену пароля\nexport const forgotPassword: AppThunk = (email) => {\n\treturn function (dispatch: AppDispatch) {\n\t\tdispatch({\n\t\t\ttype: FORGOT_PASSWORD_REQUEST,\n\t\t});\n\t\tforgotPasswordRequest(email)\n\t\t\t.then((res) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: FORGOT_PASSWORD_SUCCESS,\n\t\t\t\t});\n\t\t\t\tdispatch(push('/reset-password'));\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: FORGOT_PASSWORD_FAILED,\n\t\t\t\t});\n\t\t\t});\n\t};\n};\n\n//Изменение пароля\nexport const resetPassword: AppThunk = ({ password, token }) => {\n\treturn function (dispatch: AppDispatch) {\n\t\tdispatch({\n\t\t\ttype: RESET_PASSWORD_REQUEST,\n\t\t});\n\t\tresetPasswordRequest({ password, token })\n\t\t\t.then((res) => {\n\t\t\t\tif (res && res.success) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: RESET_PASSWORD_SUCCESS,\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log('Смена пароля прошла успешно');\n\t\t\t\t\tdispatch(push('/login'));\n\t\t\t\t} else {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: RESET_PASSWORD_FAILED,\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: RESET_PASSWORD_FAILED,\n\t\t\t\t});\n\t\t\t});\n\t};\n};\n\n//Выход из системы\nexport const logout: AppThunk = () => {\n\treturn function (dispatch: AppDispatch) {\n\t\tdispatch({\n\t\t\ttype: LOGOUT_REQUEST,\n\t\t});\n\t\tsignOutRequest()\n\t\t\t.then((res) => {\n\t\t\t\tif (res && res.success) {\n\t\t\t\t\tdeleteCookie('token');\n\t\t\t\t\tlocalStorage.removeItem('refreshToken');\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: LOGOUT_SUCCESS,\n\t\t\t\t\t});\n\t\t\t\t\tdispatch(push('/login'));\n\t\t\t\t} else {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: LOGOUT_FAILED,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: LOGOUT_FAILED,\n\t\t\t\t});\n\t\t\t});\n\t};\n};\n\n//Обновление токена\nexport const refreshToken: AppThunk = () => {\n\treturn function (dispatch: AppDispatch) {\n\t\tdispatch({\n\t\t\ttype: REFRESH_TOKEN_REQUEST,\n\t\t});\n\t\trefreshTokenRequest().then((res) => {\n\t\t\tif (res && res.success) {\n\t\t\t\tlocalStorage.setItem('refreshToken', res.refreshToken);\n\t\t\t\tconst authToken = res.accessToken.split('Bearer ')[1];\n\t\t\t\tsetCookie('token', authToken);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: REFRESH_TOKEN_SUCCESS,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: REFRESH_TOKEN_FAILED,\n\t\t\t\t});\n\t\t\t}\n\t\t}).catch((err) => {\n\t\t\tdeleteCookie('token');\n\t\t\tlocalStorage.removeItem('refreshToken');\n\t\t\tdispatch({\n\t\t\t\ttype: REFRESH_TOKEN_FAILED,\n\t\t\t});\n\t\t});\n\t};\n};\n\n\n\n","import React, { useState, memo, SyntheticEvent } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport cn from 'classnames';\nimport { Link } from 'react-router-dom';\nimport {\n  Input,\n  PasswordInput,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { login } from '../../services/actions/auth';\nimport styles from './login.module.css';\nimport { useDispatch, useSelector } from '../../hooks';\n\nfunction Login() {\n  const [state, setState] = useState({\n    email: '',\n    password: '',\n  });\n\n  const userName = useSelector((store) => store.auth.name)\n\n  const dispatch = useDispatch();\n\n  const handleInputChange = (event: SyntheticEvent<HTMLInputElement>) => {\n    const target = event.target as HTMLInputElement;\n    const value = target.value;\n    const name = target.name;\n    setState({\n      ...state,\n      [name]: value,\n    });\n  };\n\n  const submit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(login(state));\n  };\n\n  const hasToken = localStorage.getItem('refreshToken')\n\n  if (userName || hasToken) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/'\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={submit} className={cn(styles.form, 'mb-20')}>\n        <h1 className={cn(styles.title, 'text text_type_main-medium')}>Вход</h1>\n        <Input\n          type={'text'}\n          placeholder={'E-mail'}\n          onChange={handleInputChange}\n          value={state.email}\n          name={'email'}\n          error={false}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <PasswordInput\n          value={state.password}\n          name={'password'}\n          onChange={handleInputChange}\n        />\n        <Button type='primary' size='medium'>\n          Войти\n        </Button>\n      </form>\n      <div className={cn('mb-4')}>\n        <span className={'text text_type_main-default text_color_inactive'}>\n          Вы - новый пользователь?\n        </span>\n        <Link\n          to='/register'\n          className={cn('text text_type_main-default', styles.link, 'pl-2')}\n        >\n          Зарегистрироваться\n        </Link>\n      </div>\n      <div>\n        <span className={'text text_type_main-default text_color_inactive'}>\n          Забыли пароль?\n        </span>\n        <Link\n          to='/forgot-password'\n          className={cn('text text_type_main-default', styles.link, 'pl-2')}\n        >\n          Восстановить пароль\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Login);\n","import React, { useState, memo, useCallback, SyntheticEvent } from 'react';\nimport cn from 'classnames';\nimport { Link } from 'react-router-dom';\nimport {\n  Input,\n  PasswordInput,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Redirect } from 'react-router-dom';\nimport { useDispatch } from '../../hooks';\nimport { register } from '../../services/actions/auth';\nimport styles from './register.module.css';\n\nfunction Register() {\n  const [state, setState] = useState({\n    name: '',\n    email: '',\n    password: '',\n  });\n\n  const dispatch = useDispatch();\n\n  const handleInputChange = (event: SyntheticEvent<HTMLInputElement>) => {\n    const target = event.target as HTMLInputElement;\n    const value = target.value;\n    const name = target.name;\n    setState({\n      ...state,\n      [name]: value,\n    });\n  };\n\n  const onIconClick = useCallback(() => {\n    alert('Icon Click Callback');\n  }, []);\n\n  const submit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(register(state));\n  };\n  const hasToken = localStorage.getItem('refreshToken')\n\n  if (hasToken) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/'\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={submit} className={cn(styles.form, 'mb-20')}>\n        <h1 className={cn(styles.title, 'text text_type_main-medium')}>\n          Регистрация\n        </h1>\n        <Input\n          type={'text'}\n          placeholder={'Имя'}\n          onChange={handleInputChange}\n          value={state.name}\n          name={'name'}\n          error={false}\n          onIconClick={onIconClick}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <Input\n          type={'text'}\n          placeholder={'E-mail'}\n          onChange={handleInputChange}\n          value={state.email}\n          name={'email'}\n          error={false}\n          onIconClick={onIconClick}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <PasswordInput\n          value={state.password}\n          name={'password'}\n          onChange={handleInputChange}\n        />\n        <Button type='primary' size='medium'>\n          Зарегистрироваться\n        </Button>\n      </form>\n      <div className={cn('mb-4')}>\n        <span className={'text text_type_main-default text_color_inactive'}>\n          Уже зарегистрированы?\n        </span>\n        <Link\n          to='/login'\n          className={cn('text text_type_main-default', styles.link, 'pl-2')}\n        >\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Register);\n","import React, { useState, memo, SyntheticEvent } from 'react';\nimport cn from 'classnames';\nimport { Link } from 'react-router-dom';\nimport {\n  Input,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Redirect } from 'react-router-dom';\nimport { forgotPassword } from '../../services/actions/auth';\nimport { useDispatch } from '../../hooks';\nimport styles from './forgot-password.module.css';\n\nfunction ForgotPassword() {\n  const [value, setValue] = useState('');\n  const hasToken = localStorage.getItem('refreshToken');\n  const dispatch = useDispatch();\n\n  const submit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(forgotPassword(value))\n  };\n\n  if (hasToken) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/'\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={submit} className={cn(styles.form, 'mb-20')}>\n        <h1 className={cn(styles.title, 'text text_type_main-medium')}>\n          Восстановление пароля\n        </h1>\n        <Input\n          type={'email'}\n          placeholder={'Укажите e-mail'}\n          onChange={(e) => setValue(e.target.value)}\n          value={value}\n          name={'email'}\n          error={false}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <Button type='primary' size='medium'>\n          Восстановить\n        </Button>\n      </form>\n      <div className={cn('mb-4')}>\n        <span className={'text text_type_main-default text_color_inactive'}>\n          Вспомнили пароль?\n        </span>\n        <Link\n          to='/login'\n          className={cn('text text_type_main-default', styles.link, 'pl-2')}\n        >\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(ForgotPassword);\n","import React, { useState, memo, SyntheticEvent } from 'react';\nimport cn from 'classnames';\nimport { Link } from 'react-router-dom';\nimport {\n  Input,\n  PasswordInput,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { resetPassword } from '../../services/actions/auth';\nimport { useSelector, useDispatch } from '../../hooks';\nimport { Redirect } from 'react-router-dom';\nimport { resetPasswordRequest } from '../../utils/api';\nimport styles from './reset-password.module.css';\n\nfunction ResetPassword() {\n  const [state, setState] = useState({\n    password: '',\n    token: '',\n  });\n\n  const dispatch = useDispatch();\n\n  const handleInputChange = (event: SyntheticEvent<HTMLInputElement>) => {\n    const target = event.target as HTMLInputElement;\n    const value = target.value;\n    const name = target.name;\n    setState({\n      ...state,\n      [name]: value,\n    });\n  };\n\n  const submit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(resetPassword(state))\n    resetPasswordRequest(state)\n      .then((res) => {\n        console.log(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const isforgotPasswordSaccess = useSelector((store) => store.auth.isforgotPasswordSaccess);\n\n  if (localStorage.getItem('refreshToken')) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/'\n        }}\n      />\n    );\n  }\n\n  if (!localStorage.getItem('refreshToken') && !isforgotPasswordSaccess) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/forgot-password'\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={submit} className={cn(styles.form, 'mb-20')}>\n        <h1 className={cn(styles.title, 'text text_type_main-medium')}>\n          Восстановление пароля\n        </h1>\n        <PasswordInput\n          value={state.password}\n          name={'password'}\n          onChange={handleInputChange}\n        />\n        <Input\n          type={'text'}\n          placeholder={'Введите код из письма'}\n          onChange={handleInputChange}\n          value={state.token}\n          name={'token'}\n          error={false}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <Button type='primary' size='medium'>\n          Сохранить\n        </Button>\n      </form>\n      <div className={cn('mb-4')}>\n        <span className={'text text_type_main-default text_color_inactive'}>\n          Вспомнили пароль?\n        </span>\n        <Link\n          to='/login'\n          className={cn('text text_type_main-default', styles.link, 'pl-2')}\n        >\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(ResetPassword);\n","import React, { FC } from 'react';\nimport cn from 'classnames';\nimport styles from './price-item.module.css';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { TProps } from './types';\n\n\nconst PriceItem: FC<TProps> = ({ price, classMarg }) => {\n  return (\n    <span className={cn(styles['element-price'], 'text', [classMarg])}>\n      {price}\n      <CurrencyIcon type='primary' />\n    </span>\n  );\n}\n\nexport default PriceItem;\n","import React, { memo, FC } from 'react';\nimport cn from 'classnames';\nimport { Counter } from '@ya.praktikum/react-developer-burger-ui-components';\nimport PriceItem from '../../ui/price-item/price-item';\nimport styles from './burger-ingredient.module.css';\nimport { useSelector } from '../../hooks';\nimport { COUNT_BUN } from '../../constants/constants';\nimport { useDrag } from 'react-dnd';\nimport { TIngredient } from '../../types';\n\nconst BurgerIngredient: FC<TIngredient> = (item) => {\n  const [{ isDrag }, dragRef] = useDrag({\n    type: 'ingredient',\n    item,\n    collect: (monitor) => ({\n      isDrag: monitor.isDragging(),\n    }),\n  });\n\n  const { counts, bun } = useSelector(\n    (store) => store.ingredients.burgerIngredients\n  );\n  const isBun = item.type === 'bun';\n  const count =\n    isBun && bun && bun._id === item._id\n      ? COUNT_BUN\n      : counts[item._id] && counts[item._id];\n\n  const opacity = isDrag ? 0.3 : 1;\n\n  return (\n    <div\n      className={cn(styles.card)}\n      ref={dragRef}\n      style={{ opacity }}\n      data-cy='ingredient'\n    >\n      <img\n        className={cn(styles.image, 'mb-1')}\n        src={item.image_large}\n        alt={item.name}\n      />\n      {count ? <Counter count={count} size='small' /> : null}\n      <PriceItem price={item.price} classMarg='mr-1' />\n      <p\n        className={cn(\n          'text text_type_main-default',\n          styles.container__description\n        )}\n      >\n        {item.name}\n      </p>\n    </div>\n  );\n};\n\nexport default memo(BurgerIngredient);\n","export const NUNBER_OF_ELEMENTS_TO_BE_DRAWN = 6\r\nexport const COUNT_BUN = 2","import React, { memo } from 'react';\nimport cn from 'classnames';\nimport BurgerIngredient from '../burger-ingredient/burger-ingredient';\nimport {\n  Link, useLocation,\n} from \"react-router-dom\";\nimport { TIngredient } from '../../types';\nimport { TIngredientRef } from './types';\nimport styles from './ingredients.module.css';\n\n\n\nconst Ingredients = React.forwardRef<HTMLHeadingElement, TIngredientRef>(\n  ({ title, array, id }, ref) => {\n    const location = useLocation();\n\n    return (\n      <section className={'mb-10'}>\n        <h2\n          id={id}\n          ref={ref}\n          className={cn(\n            styles.ingredients__title,\n            'text',\n            'text_type_main-medium',\n            'mb-6'\n          )}\n        >\n          {title}\n        </h2>\n        <ul className={cn(styles.list, 'ml-4')}>\n          {array.map((el: TIngredient) => (\n            <li className={styles['list-item']} key={el._id}>\n              <Link to={{\n                pathname: `/ingredients/${el._id}`,\n                state: { background: location }\n              }}\n                className={styles.link}>\n                <BurgerIngredient {...el} />\n              </Link>\n            </li>\n          ))}\n        </ul>\n      </section>\n    );\n  }\n);\n\nexport default memo(Ingredients);\n","import React, { useState, useEffect, useRef, memo } from 'react';\nimport cn from 'classnames';\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\nimport Ingredients from '../ingredients/ingredients';\nimport { filterArray } from '../../utils/functions';\nimport styles from './burger-ingredients.module.css';\nimport { useSelector } from '../../hooks';\n\nconst BurgerIngredients = () => {\n  const [current, setCurrent] = useState<string>('bread');\n  const { allIngredients } = useSelector(\n    (store) => store.ingredients\n  );\n\n  const { bun, main, sauce } = filterArray(allIngredients);\n  const rootRef = useRef<HTMLElement>(null);\n  const bunRef = useRef<HTMLHeadingElement>(null);\n  const sauceRef = useRef<HTMLHeadingElement>(null);\n  const mainRef = useRef<HTMLHeadingElement>(null);\n\n  const handleScroll = () => {\n    if (rootRef && bunRef && sauceRef && mainRef && rootRef.current && bunRef.current && sauceRef.current && mainRef.current) {\n      const bunDistance = Math.abs(\n        rootRef.current.getBoundingClientRect().top -\n        bunRef.current.getBoundingClientRect().top\n      );\n      const sauceDistance = Math.abs(\n        rootRef?.current.getBoundingClientRect().top -\n        sauceRef?.current.getBoundingClientRect().top\n      );\n      const mainDistance = Math.abs(\n        rootRef?.current.getBoundingClientRect().top -\n        mainRef?.current.getBoundingClientRect().top\n      );\n      const minDistance = Math.min(bunDistance, sauceDistance, mainDistance);\n      const currentHeader =\n        minDistance === bunDistance\n          ? 'bread'\n          : minDistance === sauceDistance\n            ? 'sauces'\n            : 'fillings';\n      setCurrent((prevState) => currentHeader === prevState ? prevState : currentHeader);\n    }\n  };\n\n  useEffect(() => {\n    document.querySelector(`#${current}`)?.scrollIntoView();\n  }, [current]);\n\n  return (\n    <section>\n      <h1 className={cn('text', 'text_type_main-large', 'mb-5')}>\n        Соберите бургер\n      </h1>\n      <div\n        className={cn('text', 'text_type_main-default', 'mb-10', styles.menu)}\n      >\n        <Tab value='bread' active={current === 'bread'} onClick={setCurrent}>\n          Булки\n        </Tab>\n        <Tab value='sauces' active={current === 'sauces'} onClick={setCurrent}>\n          Соусы\n        </Tab>\n        <Tab\n          value='fillings'\n          active={current === 'fillings'}\n          onClick={setCurrent}\n        >\n          Начинки\n        </Tab>\n      </div>\n\n      <section\n        className={cn(styles.container)}\n        ref={rootRef}\n        onScroll={handleScroll}\n      >\n        <Ingredients\n          title='Булки'\n          array={bun}\n          id='bread'\n          ref={bunRef}\n        />\n        <Ingredients\n          title='Соусы'\n          array={sauce}\n          id='sauces'\n          ref={sauceRef}\n        />\n        <Ingredients\n          title='Начинки'\n          array={main}\n          id='fillings'\n          ref={mainRef}\n        />\n      </section>\n    </section>\n  );\n}\n\nexport default memo(BurgerIngredients);\n","export const GET_PRODUCTS_REQUEST: 'GET_PRODUCTS_REQUEST' = 'GET_PRODUCTS_REQUEST';\r\nexport const GET_PRODUCTS_SUCCESS: 'GET_PRODUCTS_SUCCESS' = 'GET_PRODUCTS_SUCCESS';\r\nexport const GET_PRODUCTS_FAILED: 'GET_PRODUCTS_FAILED' = 'GET_PRODUCTS_FAILED';\r\n\r\nexport const INCREASE_INGREDIENT: 'INCREASE_INGREDIENT' = 'INCREASE_INGREDIENT';\r\nexport const DECREASE_INGREDIENT: 'DECREASE_INGREDIENT' = 'DECREASE_INGREDIENT';\r\nexport const DELETE_INGREDIENT: 'DELETE_INGREDIENT' = 'DELETE_INGREDIENT';\r\nexport const ADD_INGREDIENTS: 'ADD_INGREDIENTS' = 'ADD_INGREDIENTS';\r\nexport const UPDATE_CONSTRUCTOR: 'UPDATE_CONSTRUCTOR' = 'UPDATE_CONSTRUCTOR';\r\n\r\nexport const CREATE_ORDER_REQUEST: 'CREATE_ORDER_REQUEST' = 'CREATE_ORDER_REQUEST';\r\nexport const CREATE_ORDER_SUCCESS: 'CREATE_ORDER_SUCCESS' = 'CREATE_ORDER_SUCCESS';\r\nexport const CREATE_ORDER_FAILED: 'CREATE_ORDER_FAILED' = 'CREATE_ORDER_FAILED';\r\n\r\nexport const GET_ORDER_REQUEST: 'GET_ORDER_REQUEST' = 'GET_ORDER_REQUEST';\r\nexport const GET_ORDER_SUCCESS: 'GET_ORDER_SUCCESS' = 'GET_ORDER_SUCCESS';\r\nexport const GET_ORDER_FAILED: 'GET_ORDER_FAILED' = 'GET_ORDER_FAILED';\r\n\r\nexport const GET_USER_ORDER_REQUEST: 'GET_USER_ORDER_REQUEST' = 'GET_USER_ORDER_REQUEST';\r\nexport const GET_USER_ORDER_SUCCESS: 'GET_USER_ORDER_SUCCESS' = 'GET_USER_ORDER_SUCCESS';\r\nexport const GET_USER_ORDER_FAILED: 'GET_USER_ORDER_FAILED' = 'GET_USER_ORDER_FAILED';","import { getProductsRequest, addOrdersRequest, getOrderRequest, getUserOrderRequest } from '../../utils/api';\nimport { TIngredient, TOrderInfo, TOrder, TIngredientWithProductId } from '../../types';\nimport {\n  GET_PRODUCTS_REQUEST, GET_PRODUCTS_SUCCESS, GET_PRODUCTS_FAILED,\n  ADD_INGREDIENTS, DELETE_INGREDIENT,\n  INCREASE_INGREDIENT, DECREASE_INGREDIENT, UPDATE_CONSTRUCTOR,\n  CREATE_ORDER_REQUEST, CREATE_ORDER_SUCCESS, CREATE_ORDER_FAILED,\n  GET_ORDER_REQUEST, GET_ORDER_SUCCESS, GET_ORDER_FAILED,\n  GET_USER_ORDER_REQUEST, GET_USER_ORDER_SUCCESS, GET_USER_ORDER_FAILED,\n} from '../constants/ingredietns';\nimport { AppDispatch, AppThunk } from '../../types';\n\n\n/***/\nexport interface IGetProdictsRequestAction {\n  readonly type: typeof GET_PRODUCTS_REQUEST;\n}\n\nexport interface IGetProdictsSuccessAction {\n  readonly type: typeof GET_PRODUCTS_SUCCESS;\n  readonly items: Array<TIngredient>;\n}\n\nexport interface IGetProdictsFailedAction {\n  readonly type: typeof GET_PRODUCTS_FAILED;\n}\n\n/***/\nexport interface IAddIngredientsAction {\n  readonly type: typeof ADD_INGREDIENTS;\n  readonly item: TIngredientWithProductId\n}\n\nexport interface IDeleteIngredientAction {\n  readonly type: typeof DELETE_INGREDIENT;\n  readonly id: string;\n}\n\nexport interface IIncreaseIngredientAction {\n  readonly type: typeof INCREASE_INGREDIENT;\n  readonly key: string;\n  readonly typeItem: string;\n}\n\nexport interface IDecreaseIngredientAction {\n  readonly type: typeof DECREASE_INGREDIENT;\n  readonly key: string,\n  readonly typeItem: string,\n}\n\nexport interface IUpdateOrderAction {\n  readonly type: typeof UPDATE_CONSTRUCTOR;\n  readonly toIndex: number,\n  readonly fromIndex: number,\n}\n\n/***/\nexport interface ICreateOrderRequestAction {\n  readonly type: typeof CREATE_ORDER_REQUEST;\n}\n\nexport interface ICreateOrderSuccessAction {\n  readonly type: typeof CREATE_ORDER_SUCCESS;\n  readonly order: TOrderInfo;\n}\n\nexport interface ICreateOrderFailedAction {\n  readonly type: typeof CREATE_ORDER_FAILED;\n}\n\n/***/\nexport interface IGetOrderOrderRequestAction {\n  readonly type: typeof GET_ORDER_REQUEST;\n}\n\nexport interface IGetOrderOrderSuccessAction {\n  readonly type: typeof GET_ORDER_SUCCESS;\n  readonly order: TOrder;\n}\n\nexport interface IGetOrderOrderFailedAction {\n  readonly type: typeof GET_ORDER_FAILED;\n}\n\n/***/\nexport interface IGetUserOrderOrderRequestAction {\n  readonly type: typeof GET_USER_ORDER_REQUEST;\n}\n\nexport interface IGetUserOrderOrderSuccessAction {\n  readonly type: typeof GET_USER_ORDER_SUCCESS;\n  readonly order: TOrder;\n}\n\nexport interface IGetUserOrderOrderFailedAction {\n  readonly type: typeof GET_USER_ORDER_FAILED;\n}\n\nexport type TIngredientsActions =\n  | IGetProdictsRequestAction\n  | IGetProdictsSuccessAction\n  | IGetProdictsFailedAction\n  | IAddIngredientsAction\n  | IDeleteIngredientAction\n  | IIncreaseIngredientAction\n  | IDecreaseIngredientAction\n  | IUpdateOrderAction\n  | ICreateOrderRequestAction\n  | ICreateOrderSuccessAction\n  | ICreateOrderFailedAction\n  | IGetOrderOrderRequestAction\n  | IGetOrderOrderSuccessAction\n  | IGetOrderOrderFailedAction\n  | IGetUserOrderOrderRequestAction\n  | IGetUserOrderOrderSuccessAction\n  | IGetUserOrderOrderFailedAction;\n\n\nexport const getIngredients: AppThunk = () => {\n  return function (dispatch: AppDispatch) {\n    dispatch({\n      type: GET_PRODUCTS_REQUEST,\n    });\n    getProductsRequest()\n      .then((res) => {\n        if (res && res.success) {\n          dispatch({\n            type: GET_PRODUCTS_SUCCESS,\n            items: res.data,\n          });\n        } else {\n          dispatch({\n            type: GET_PRODUCTS_FAILED,\n          });\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        dispatch({\n          type: GET_PRODUCTS_FAILED,\n        });\n      });\n  };\n};\n\nexport const getOrder: AppThunk = (id: string) => {\n  return function (dispatch: AppDispatch) {\n    dispatch({\n      type: GET_ORDER_REQUEST,\n    });\n    getOrderRequest(id)\n      .then((res) => {\n        if (res && res.success) {\n          dispatch({\n            type: GET_ORDER_SUCCESS,\n            order: res.orders[0],\n          });\n        } else {\n          dispatch({\n            type: GET_ORDER_FAILED,\n          });\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        dispatch({\n          type: GET_ORDER_FAILED,\n        });\n      });\n  };\n};\n\nexport const getUserOrder: AppThunk = (id: string) => {\n  return function (dispatch: AppDispatch) {\n    dispatch({\n      type: GET_USER_ORDER_REQUEST,\n    });\n    getUserOrderRequest(id)\n      .then((res) => {\n        if (res && res.success) {\n          dispatch({\n            type: GET_USER_ORDER_SUCCESS,\n            order: res.orders[0],\n          });\n        } else {\n          dispatch({\n            type: GET_USER_ORDER_FAILED,\n          });\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        dispatch({\n          type: GET_ORDER_FAILED,\n        });\n      });\n  };\n};\n\nexport const createOrder: AppThunk = (ingredientsId: Array<string>) => {\n  return function (dispatch: AppDispatch) {\n    dispatch({\n      type: CREATE_ORDER_REQUEST,\n    });\n    addOrdersRequest(ingredientsId)\n      .then((res) => {\n        if (res && res.success) {\n          dispatch({\n            type: CREATE_ORDER_SUCCESS,\n            order: res,\n          });\n        } else {\n          dispatch({\n            type: CREATE_ORDER_FAILED,\n          });\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        dispatch({\n          type: CREATE_ORDER_FAILED,\n        });\n      });\n  };\n};\n","import React, { memo, FC } from 'react';\nimport {\n  ConstructorElement,\n  DragIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './burger-item.module.css';\nimport { useRef } from 'react';\nimport { TProps, TDragItem } from './types';\nimport { useDrag, useDrop, DropTargetMonitor } from 'react-dnd';\nimport { XYCoord } from 'dnd-core'\n\n\n\nconst BurgerItem: FC<TProps> = ({ item, index, deleteIngredient, moveItem }) => {\n  const id = item._id;\n  const ref = useRef<HTMLLIElement>(null);\n  const [, drop] = useDrop({\n    accept: 'item',\n    collect(monitor) {\n      return {\n        handlerId: monitor.getHandlerId(),\n      };\n    },\n    hover(el: TDragItem, monitor: DropTargetMonitor) {\n      if (!ref.current) {\n        return;\n      }\n      const dragIndex = el.index;\n      const hoverIndex = index;\n\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\n\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\n      const clientOffset = monitor.getClientOffset();\n\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\n\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n      moveItem(dragIndex, hoverIndex);\n\n      el.index = hoverIndex;\n    },\n  });\n  const [{ isDrag }, drag] = useDrag({\n    type: 'item',\n    item: () => {\n      return { id, index };\n    },\n    collect: (monitor) => ({\n      isDrag: monitor.isDragging(),\n    }),\n  });\n\n  const opacity = isDrag ? 0 : 1;\n  drag(drop(ref));\n\n  return (\n    <li className={styles.item} ref={ref} style={{ opacity }}>\n      <DragIcon type='primary' />\n      <ConstructorElement\n        text={item.name}\n        price={item.price}\n        thumbnail={item.image}\n        handleClose={deleteIngredient}\n      />\n    </li>\n  );\n}\n\nexport default memo(BurgerItem);\n","import React, { useCallback, memo, FC } from 'react';\nimport cn from 'classnames';\nimport {\n  ConstructorElement,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport PriceItem from '../../ui/price-item/price-item';\nimport styles from './burger-constructor.module.css';\nimport { calculationCost } from '../../utils/functions';\nimport { createOrder } from '../../services/actions/ingredients';\nimport { useSelector, useDispatch } from '../../hooks';\nimport {\n  DELETE_INGREDIENT,\n  DECREASE_INGREDIENT,\n  UPDATE_CONSTRUCTOR\n} from '../../services/constants/ingredietns';\nimport Preloader from '../preloader/preloader';\nimport { useDrop } from 'react-dnd';\nimport BurgerItem from '../burger-item/burger-item';\nimport { push } from 'connected-react-router';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { TProps, TIngredientWithProductId } from './types'\nimport { TIngredient } from '../../types'\n\n\n\nconst BurgerConstructor: FC<TProps> = ({ onDropHandler }) => {\n  const { bun, otherIngredients } = useSelector(\n    (store) => store.ingredients.burgerIngredients\n  );\n  const { orderRequest } = useSelector((store) => store.ingredients);\n  const location = useLocation();\n  const history = useHistory();\n  const hasToken = localStorage.getItem('refreshToken')\n  const dispatch = useDispatch();\n\n  const [{ canDrop, isHover }, dropTarget] = useDrop({\n    accept: 'ingredient',\n    drop(item: TIngredient) {\n      onDropHandler(item);\n    },\n    collect: (monitor) => ({\n      isHover: monitor.isOver(),\n      canDrop: monitor.canDrop(),\n    }),\n  });\n\n  const handleClick = () => {\n    if (hasToken) {\n      const ingredientsId = otherIngredients.map((el: TIngredientWithProductId) => el._id);\n      const bunId: string = bun ? bun._id : ''\n      dispatch(createOrder([bunId, ...ingredientsId]));\n      history.push({\n        pathname: '/',\n        state: {\n          background: location\n        }\n      });\n    } else {\n      dispatch(push('/login'));\n    }\n  };\n\n  const isActive = canDrop && isHover;\n  let classModificator = isActive\n    ? 'burger-container_active'\n    : canDrop\n      ? 'burger-container_candrop'\n      : '';\n\n  const moveItem = useCallback(\n    (dragIndex, hoverIndex) => {\n      dispatch({\n        type: UPDATE_CONSTRUCTOR,\n        toIndex: hoverIndex,\n        fromIndex: dragIndex,\n      });\n    },\n    [dispatch]\n  );\n\n  if (orderRequest) {\n    return (<Preloader />)\n  }\n\n  return (\n    <section className={cn(styles.container, 'pl-4')}>\n      <div\n        className={cn(styles['burger-container'], styles[classModificator])}\n        ref={dropTarget}\n        data-cy='drop-target'\n      >\n        {bun && (\n          <div className={'mr-8'} data-cy=\"up-bun\">\n            <ConstructorElement\n              type='top'\n              isLocked={true}\n              text={`${bun.name} (верх)`}\n              price={bun.price}\n              thumbnail={bun.image}\n            />\n          </div>\n        )}\n\n        <ul className={cn(styles.list, 'pr-4')} data-cy=\"other-ingredients-container\">\n          {otherIngredients.map((el: TIngredientWithProductId, i: number) => {\n            const deleteIngredient = () => {\n              dispatch({\n                type: DELETE_INGREDIENT,\n                id: el.productId,\n              });\n              dispatch({\n                type: DECREASE_INGREDIENT,\n                key: el._id,\n                typeItem: el.type,\n              });\n            };\n            return (\n              <BurgerItem\n                item={el}\n                index={i}\n                key={el.productId}\n                deleteIngredient={deleteIngredient}\n                moveItem={moveItem}\n              />\n            );\n          })}\n        </ul>\n        {bun && (\n          <div className={'mr-8'} data-cy=\"down-bun\">\n            <ConstructorElement\n              type='bottom'\n              isLocked={true}\n              text={`${bun.name} (низ)`}\n              price={bun.price}\n              thumbnail={bun.image}\n            />\n          </div>\n        )}\n      </div>\n\n      <div className={cn(styles.order, 'mt-10')}>\n        {otherIngredients.length || bun ? (\n          <PriceItem\n            price={calculationCost(bun, otherIngredients)}\n            classMarg='mr-10'\n          />\n        ) : null}\n        {bun && (\n          <Button type='primary' size='large' onClick={handleClick}>\n            Оформить заказ\n          </Button>\n        )}\n      </div>\n    </section>\n  );\n}\n\nexport default memo(BurgerConstructor);\n","import React, { memo } from 'react';\nimport cn from 'classnames';\nimport { v4 as uuidv4 } from 'uuid';\nimport BurgerIngredients from '../../components/burger-ingredients/burger-ingredients';\nimport BurgerConstructor from '../../components/burger-constructor/burger-constructor';\nimport styles from './main.module.css';\nimport { useSelector, useDispatch } from '../../hooks';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { TIngredient } from '../../types';\nimport {\n  ADD_INGREDIENTS,\n  INCREASE_INGREDIENT,\n} from '../../services/constants/ingredietns';\nimport Preloader from '../../components/preloader/preloader';\n\nfunction Main() {\n  const { isLoading, hasError, loaded } = useSelector(\n    (store) => store.ingredients\n  );\n\n  const dispatch = useDispatch();\n  const handleDrop = (item: TIngredient) => {\n    const newItem = { ...item, productId: uuidv4() };\n    dispatch({\n      type: ADD_INGREDIENTS,\n      item: newItem\n    });\n    dispatch({\n      type: INCREASE_INGREDIENT,\n      key: item._id,\n      typeItem: item.type,\n    });\n  };\n\n  return (\n    <main className={cn(styles.main, 'p-10')}>\n      {isLoading && <Preloader />}\n      {hasError && 'Произошла ошибка'}\n      {!isLoading && !hasError && loaded && (\n        <DndProvider backend={HTML5Backend}>\n          <div className={styles.columns}>\n            <BurgerIngredients />\n            <BurgerConstructor onDropHandler={handleDrop} />\n          </div>\n        </DndProvider>\n      )}\n    </main>\n  );\n}\n\nexport default memo(Main);\n","import React, { memo, FC } from 'react';\nimport cn from 'classnames';\nimport PriceItem from '../../ui/price-item/price-item';\nimport styles from './orders-item.module.css';\nimport { useSelector } from '../../hooks';\nimport { conversionDateForCard, getPrice, getBurgerIngredients } from '../../utils/functions';\nimport { getStatus } from '../../utils/functions';\nimport { NUNBER_OF_ELEMENTS_TO_BE_DRAWN } from '../../constants/constants';\nimport { TProps } from './types';\nimport { TIngredient } from '../../types';\n\n\nconst OrdersItem: FC<TProps> = ({ number, name, ingredients, createdAt, status }) => {\n  const { allIngredients } = useSelector((store) => store.ingredients);\n  const stringWithDay = conversionDateForCard(createdAt);\n  const burgerIngredients = getBurgerIngredients(ingredients, allIngredients);\n  const burgerItem = burgerIngredients.slice(0, NUNBER_OF_ELEMENTS_TO_BE_DRAWN);\n  const count = burgerIngredients.length;\n  let zI = NUNBER_OF_ELEMENTS_TO_BE_DRAWN;\n  const numberIngredients = count - NUNBER_OF_ELEMENTS_TO_BE_DRAWN;\n  const burgerPrice = getPrice(burgerIngredients);\n  const st = status ? getStatus(status) : null;\n\n\n  return (\n    <div className={cn(styles['orders-item'], 'p-6')}>\n      <div className={cn(styles['orders-info'])}>\n        <span className='text text_type_digits-default'>#{number}</span>\n        <span className={'text text_type_main-default text_color_inactive'}>\n          {stringWithDay}\n        </span>\n      </div>\n      <div>\n        <h2 className={cn('text text_type_main-medium', 'mb-2')}>{name}</h2>\n        {status ? (\n          <span\n            className={cn(\n              'text text_type_main-default',\n              styles[`status_color_${st?.textColor}`]\n            )}\n          >\n            {st?.text}\n          </span>\n        ) : null}\n      </div>\n      <div className={cn(styles['orders-info'])}>\n        <ul className={cn(styles.list)}>\n          {burgerItem.map((el: TIngredient, i: number) => {\n            zI -= 1\n            return (\n              <li className={styles['list-item']} key={i} style={{ zIndex: zI }}>\n                <div className={cn(styles.icon)}>\n                  <img src={el.image_mobile} className={cn(styles.image)} alt='ингредиент бургера' />\n                </div>\n              </li>\n            )\n          })}\n          {count > 6 ? (<div className={styles.overlay}>\n            <span>{`+${numberIngredients}`}</span>\n          </div>) : null}\n        </ul>\n        <PriceItem price={burgerPrice} />\n      </div>\n    </div >\n  );\n}\nexport default memo(OrdersItem);\n","import React, { memo } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport cn from 'classnames';\nimport OrdersItem from '../orders-item/orders-item';\nimport { useSelector } from '../../hooks';\nimport styles from './feed-orders.module.css';\nimport { TOrder } from '../../types';\nimport Preloader from '../preloader/preloader';\n\nfunction FeedOrders() {\n  const location = useLocation();\n  const { orders } = useSelector((store) => store.ws)\n\n  if (!orders) {\n    return <Preloader />\n  }\n\n  return (\n    <section>\n      <h1 className={cn('text', 'text_type_main-large', 'mb-5')}>\n        Лента заказов\n      </h1>\n      <ul className={cn(styles.list)}>\n        {orders?.map((el: TOrder) => (\n          <li className={cn(styles['list-item'], 'mb-4')} key={el._id}>\n            <Link to={{\n              pathname: `/feed/${el.number}`,\n              state: { background: location }\n            }}\n              className={styles.link}>\n              <OrdersItem\n                number={el.number}\n                name={el.name}\n                ingredients={el.ingredients}\n                createdAt={el.createdAt}\n              />\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </section>\n  );\n}\n\nexport default memo(FeedOrders);\n","import React, { memo } from 'react';\nimport cn from 'classnames';\nimport { useSelector } from '../../hooks';\nimport { filterOrdersByStatus } from '../../utils/functions';\nimport styles from './orders-table.module.css';\nimport { TOrder } from '../../types';\n\nconst OrdersTable = () => {\n  const { total, totalToday, orders } = useSelector((store) => store.ws)\n  const statusArrays = filterOrdersByStatus(orders)\n  const doneArray = statusArrays?.done.slice(0, 30);\n\n  return (\n    <section className={cn(styles.container, 'pl-4')}>\n      <div className={styles.table}>\n        <div>\n          <h2 className={cn('text text_type_main-medium', 'mb-6')}>Готовы:</h2>\n          <ul\n            className={cn(\n              styles.list,\n              styles['list_color_green'],\n              'text text_type_digits-default'\n            )}\n          >\n            {doneArray?.map((el: TOrder) => (<li key={el._id} className={cn(styles['list-item'], 'mb-2', 'mr-8')}>{el.number}</li>))}\n          </ul>\n        </div>\n        <div>\n          <h2 className={cn('text text_type_main-medium', 'mb-6')}>\n            В работе:\n          </h2>\n          <ul className={cn(styles.list, 'text text_type_digits-default')}>\n            {statusArrays?.pending.map((el: TOrder) => (<li key={el._id} className={cn(styles['list-item'], 'mb-2', 'mr-8')}>{el.number}</li>))}\n          </ul>\n        </div>\n      </div>\n      <div>\n        <h2 className={cn('text text_type_main-medium')}>\n          Выполнено за все время:\n        </h2>\n        <span className={cn('text text_type_digits-large', styles.count)}>\n          {total || 0}\n        </span>\n      </div>\n      <div>\n        <h2 className={cn('text text_type_main-medium')}>\n          Выполнено за сегодня:\n        </h2>\n        <span className={cn('text text_type_digits-large', styles.count)}>\n          {totalToday || 0}\n        </span>\n      </div>\n    </section>\n  );\n}\n\nexport default memo(OrdersTable);\n","export const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\r\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS';\r\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\r\nexport const WS_CONNECTION_CLOSE: 'WS_CONNECTION_CLOSE' = 'WS_CONNECTION_CLOSE';\r\nexport const WS_GET_MESSAGE: 'WS_GET_MESSAGE' = 'WS_GET_MESSAGE';\r\nexport const WS_SEND_MESSAGE: 'WS_SEND_MESSAGE' = 'WS_SEND_MESSAGE';\r\nexport const WS_USER_NAME_UPDATE: 'WS_USER_NAME_UPDATE' = 'WS_USER_NAME_UPDATE';","import React, { memo, useEffect } from 'react';\nimport cn from 'classnames';\nimport styles from './feed.module.css';\nimport FeedOrders from '../../components/feed-orders/feed-orders';\nimport OrdersTable from '../../components/orders-table/orders-table';\nimport { useDispatch } from '../../hooks';\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSE } from '../../services/constants/ws-actions';\n\n\nfunction Feed() {\n  const dispatch = useDispatch();\n  useEffect(\n    () => {\n      dispatch({ type: WS_CONNECTION_START });\n      return () => {\n        dispatch({ type: WS_CONNECTION_CLOSE })\n      }\n    },\n    [dispatch]\n  );\n\n  return (\n    <div className={cn(styles.columns, 'p-10')}>\n      <FeedOrders />\n      <OrdersTable />\n    </div>\n  );\n}\n\nexport default memo(Feed);\n","import React, { memo, useEffect } from 'react';\nimport cn from 'classnames';\nimport styles from './order.module.css';\nimport { useParams, Redirect, useRouteMatch } from 'react-router-dom';\nimport PriceItem from '../../ui/price-item/price-item';\nimport { useDispatch, useSelector } from '../../hooks';\nimport { getOrder, getUserOrder } from '../../services/actions/ingredients';\nimport Preloader from '../../components/preloader/preloader';\nimport { conversionDateForCard, getStatus, getPrice, getBurgerIngredients, getBurgerIngredientsObjWithCount } from '../../utils/functions';\n\nfunction Order() {\n  const dispatch = useDispatch();\n  const isProfile = !!useRouteMatch(\"/profile\");\n  const { id } = useParams<{ id: string }>();\n  useEffect(\n    () => {\n      dispatch(isProfile\n        ? getUserOrder(id)\n        : getOrder(id)\n      )\n    },\n    [dispatch, isProfile, id]\n  );\n  const { allIngredients } = useSelector((store) => store.ingredients)\n  const order = useSelector((store) => store.ingredients.currentOrder)\n  const { orderLoaded } = useSelector((store) => store.ingredients)\n  const stringWithDay = order && order.createdAt && conversionDateForCard(order?.createdAt);\n  const burgerIngredients = order && order.ingredients && getBurgerIngredients(order?.ingredients, allIngredients)\n  const arrUniqItem: Array<string> = Array.from(new Set(order?.ingredients))\n  const bI = burgerIngredients && getBurgerIngredientsObjWithCount(burgerIngredients)\n  const burgerPrice = burgerIngredients && getPrice(burgerIngredients)\n  const name = order?.name\n  const status = order?.status;\n  const st = status ? getStatus(status) : null;\n  if (orderLoaded && !order) return <Redirect to='/' />;\n\n\n  if (!order) {\n    return <Preloader />;\n  }\n\n  return (\n    <div className={styles.container}>\n      <span className={cn('text text_type_digits-default')}>#{id}</span>\n      <h1\n        className={cn(\n          'text text_type_main-medium',\n          'mb-3',\n          'mt-10',\n          styles.title\n        )}\n      >\n        {name}\n      </h1>\n      <p\n        className={cn(\n          'text text_type_main-default',\n          'mb-15',\n          styles.status,\n          styles[`status_color_${st?.textColor}`]\n        )}\n      >\n        {st?.text}\n      </p>\n      <p className={cn('text text_type_main-medium', 'mb-6', styles.title)}>\n        Состав:\n      </p>\n      <ul className={cn(styles.list, 'mb-10')}>\n        {arrUniqItem.map((el: string, i: number) => {\n          return <li className={cn(styles['list-item'], 'mr-6')} key={i}>\n            <div className={cn(styles.icon, 'mr-4')}>\n              <img src={bI?.item[el]?.image_mobile} alt='Вкусная булка' className={cn(styles.image)} />\n            </div>\n            <p\n              className={cn(\n                styles.ingredient,\n                'mr-4',\n                'text text_type_main-default'\n              )}\n            >\n              {bI?.item[el]?.name}\n            </p>\n            <span className={cn('mr-1', 'text text_type_digits-default')}>\n              {bI?.count[el]} x{' '}\n            </span>\n            <PriceItem price={bI?.item[el]?.price || 0} />\n          </li>\n        })}\n      </ul>\n      <div className={styles.info}>\n        <span\n          className={cn('text text_type_main-default text_color_inactive')}\n        >\n          {stringWithDay}\n        </span>\n        <PriceItem price={burgerPrice || 0} />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Order);\n","import React, { memo } from 'react';\nimport cn from 'classnames';\nimport styles from './nav-profile.module.css';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport { logout } from '../../services/actions/auth';\nimport { useDispatch } from '../../hooks';\n\nconst NewProfile = () => {\n  const { pathname } = useLocation();\n  const dispatch = useDispatch();\n\n  const clickHandler = () => {\n    dispatch(logout());\n  };\n\n  return (\n    <div className={cn(styles.nav)}>\n      <ul className={cn(styles['list-nav'], 'mb-20')}>\n        <li>\n          <NavLink\n            exact\n            to='/profile'\n            className={cn(\n              styles.link,\n              'pt-4',\n              'pb-4',\n              'pr-5',\n              'mr-2',\n              'text text_type_main-medium text_color_inactive'\n            )}\n            activeClassName={styles.link_active}\n          >\n            <span className={cn('ml-2')}>Профиль</span>\n          </NavLink>\n        </li>\n        <li>\n          <NavLink\n            exact\n            to='/profile/orders'\n            className={cn(\n              styles.link,\n              'pt-4',\n              'pb-4',\n              'pr-5',\n              'mr-2',\n              'text text_type_main-medium text_color_inactive'\n            )}\n            activeClassName={styles.link_active}\n          >\n            <span className={cn('ml-2')}>История заказов</span>\n          </NavLink>\n        </li>\n        <li>\n          <NavLink\n            exact\n            to='/login'\n            className={cn(\n              styles.link,\n              'pt-4',\n              'pb-4',\n              'pr-5',\n              'mr-2',\n              'text text_type_main-medium text_color_inactive'\n            )}\n            activeClassName={styles.link_active}\n          >\n            <span className={cn('ml-2')} onClick={clickHandler}>\n              Выход\n            </span>\n          </NavLink>\n        </li>\n      </ul>\n      {pathname === '/profile' ? (\n        <span className={cn('text text_type_main-default text_color_inactive')}>\n          В этом разделе вы можете изменить свои персональные данные\n        </span>\n      ) : null}\n    </div>\n  );\n};\n\nexport default memo(NewProfile);\n","import React, { useState, memo, useEffect, SyntheticEvent, useRef } from 'react';\nimport cn from 'classnames';\nimport styles from './forms-profile.module.css';\nimport {\n  Input,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useSelector, useDispatch } from '../../hooks';\nimport { updateUser } from '../../services/actions/auth';\nimport Preloader from '../preloader/preloader';\n\nconst FormsProfile = () => {\n  const currentUserName = useSelector((store) => store.auth.name);\n  const currentUserEmail = useSelector((store) => store.auth.email);\n  const { updateUserRequest } = useSelector((store) => store.auth)\n  const dispatch = useDispatch();\n\n  const [state, setState] = useState({\n    name: '',\n    email: '',\n    password: '',\n    nameDisabled: true,\n    emailDisabled: true,\n    passwordDisabled: true,\n  });\n\n  useEffect(() => {\n    setState((state) => {\n      return {\n        ...state,\n        name: currentUserName,\n        email: currentUserEmail,\n      };\n    });\n  }, [currentUserName, currentUserEmail]);\n\n  const handleInputChange = (event: SyntheticEvent<HTMLInputElement>): void => {\n    const target = event.target as HTMLInputElement;\n    const value = target.value;\n    const name = target.name;\n    setState({\n      ...state,\n      [name]: value,\n    });\n  };\n  const nameInputRef = useRef<HTMLInputElement>(null);\n  const emailInputRef = useRef<HTMLInputElement>(null);\n  const passwordInputRef = useRef<HTMLInputElement>(null);\n\n  const activeNameInput = () => {\n    setState({\n      ...state,\n      nameDisabled: state.nameDisabled ? false : true,\n    });\n    if (nameInputRef && nameInputRef.current) {\n      nameInputRef.current.disabled = false;\n    }\n    setTimeout(() => nameInputRef && nameInputRef.current && nameInputRef.current.focus(), 0);\n  };\n\n  const activeEmailInput = () => {\n    setState({\n      ...state,\n      emailDisabled: state.emailDisabled ? false : true,\n    });\n    if (emailInputRef && emailInputRef.current) {\n      emailInputRef.current.disabled = false;\n    }\n    setTimeout(() => emailInputRef && emailInputRef.current && emailInputRef.current.focus(), 0);\n  };\n\n  const activePasswordInput = () => {\n    setState({\n      ...state,\n      passwordDisabled: state.passwordDisabled ? false : true,\n    });\n    if (passwordInputRef && passwordInputRef.current) {\n      passwordInputRef.current.disabled = false;\n    }\n    setTimeout(() => passwordInputRef && passwordInputRef.current && passwordInputRef.current.focus(), 0);\n  };\n\n  const iconNameInput = state.nameDisabled ? 'EditIcon' : 'CloseIcon';\n  const emailNameInput = state.emailDisabled ? 'EditIcon' : 'CloseIcon';\n  const passwordNameInput = state.passwordDisabled ? 'EditIcon' : 'CloseIcon';\n\n  const submit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    let data = {};\n    data =\n      state.name !== currentUserName ? { ...data, name: state.name } : data;\n    data =\n      state.email !== currentUserEmail ? { ...data, email: state.email } : data;\n    data =\n      state.password.length !== 0\n        ? { ...data, password: state.password }\n        : data;\n    dispatch(updateUser({ ...data }));\n    setState({\n      ...state,\n      password: '',\n      nameDisabled: true,\n      emailDisabled: true,\n      passwordDisabled: true,\n    });\n  };\n\n  const handleClick = (e: SyntheticEvent) => {\n    e.preventDefault();\n    setState({\n      ...state,\n      name: currentUserName,\n      email: currentUserEmail,\n      password: '',\n      nameDisabled: true,\n      emailDisabled: true,\n      passwordDisabled: true,\n    });\n  };\n\n  if (updateUserRequest) {\n    return (<Preloader />)\n  }\n\n  return (\n    <form onSubmit={submit} className={cn(styles.form)}>\n      <Input\n        type={'text'}\n        placeholder={'Имя'}\n        onChange={handleInputChange}\n        icon={iconNameInput}\n        value={state.name}\n        name={'name'}\n        error={false}\n        ref={nameInputRef}\n        onIconClick={activeNameInput}\n        errorText={'Ошибка'}\n        size={'default'}\n        disabled={state.nameDisabled}\n      />\n      <Input\n        type={'email'}\n        placeholder={'Логин'}\n        onChange={handleInputChange}\n        icon={emailNameInput}\n        value={state.email}\n        name={'email'}\n        error={false}\n        ref={emailInputRef}\n        onIconClick={activeEmailInput}\n        errorText={'Ошибка'}\n        size={'default'}\n        disabled={state.emailDisabled}\n      />\n      <Input\n        type={'password'}\n        placeholder={'Пароль'}\n        onChange={handleInputChange}\n        icon={passwordNameInput}\n        value={state.password}\n        name={'password'}\n        error={false}\n        ref={passwordInputRef}\n        onIconClick={activePasswordInput}\n        errorText={'Ошибка'}\n        size={'default'}\n        disabled={state.passwordDisabled}\n      />\n      {state.name !== currentUserName ||\n        state.email !== currentUserEmail ||\n        state.password.length !== 0 ? (\n        <div className={styles.buttons}>\n          <span className={styles.button} onClick={handleClick}>\n            Отмена\n          </span>\n          <Button type='primary' size='medium'>\n            Сохранить\n          </Button>\n        </div>\n      ) : null}\n    </form>\n  );\n}\n\nexport default memo(FormsProfile);\n","export const WS_CONNECTION_START_AUTH: 'WS_CONNECTION_START_AUTH' = 'WS_CONNECTION_START_AUTH';\r\nexport const WS_CONNECTION_SUCCESS_AUTH: 'WS_CONNECTION_SUCCESS_AUTH' = 'WS_CONNECTION_SUCCESS_AUTH';\r\nexport const WS_CONNECTION_ERROR_AUTH: 'WS_CONNECTION_ERROR_AUTH' = 'WS_CONNECTION_ERROR_AUTH';\r\nexport const WS_CONNECTION_CLOSED_AUTH: 'WS_CONNECTION_CLOSED_AUTH' = 'WS_CONNECTION_CLOSED_AUTH';\r\nexport const WS_CONNECTION_CLOSE_AUTH: 'WS_CONNECTION_CLOSE_AUTH' = 'WS_CONNECTION_CLOSE_AUTH';\r\nexport const WS_GET_MESSAGE_AUTH: 'WS_GET_MESSAGE_AUTH' = 'WS_GET_MESSAGE_AUTH';\r\nexport const WS_SEND_MESSAGE_AUTH: 'WS_SEND_MESSAGE_AUTH' = 'WS_SEND_MESSAGE_AUTH';\r\nexport const WS_USER_NAME_UPDATE_AUTH: 'WS_USER_NAME_UPDATE_AUTH' = 'WS_USER_NAME_UPDATE_AUTH';","import React, { memo, useEffect } from 'react';\nimport cn from 'classnames';\nimport styles from './profile-orders.module.css';\nimport { Link, useLocation } from 'react-router-dom';\nimport OrdersItem from '../orders-item/orders-item';\nimport { useDispatch, useSelector } from '../../hooks';\nimport { WS_CONNECTION_START_AUTH, WS_CONNECTION_CLOSE_AUTH } from '../../services/constants/ws-actions-auth';\nimport { TOrder } from '../../types';\n\nfunction ProfileOrders() {\n\tconst dispatch = useDispatch();\n\tconst location = useLocation();\n\n\tuseEffect(\n\t\t() => {\n\t\t\tdispatch({ type: WS_CONNECTION_START_AUTH });\n\t\t\treturn () => {\n\t\t\t\tdispatch({ type: WS_CONNECTION_CLOSE_AUTH })\n\t\t\t\treturn;\n\t\t\t}\n\t\t},\n\t\t[dispatch]\n\t);\n\n\tconst { orders } = useSelector((store) => store.wsAuth);\n\treturn (\n\t\t<ul className={cn(styles.list, 'mb-20')}>\n\t\t\t{orders?.map((el: TOrder, i: number) => (\n\t\t\t\t<li className={cn(styles['list-item'])} key={i}>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto={{\n\t\t\t\t\t\t\tpathname: `/profile/orders/${el.number}`,\n\t\t\t\t\t\t\tstate: { background: location }\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={styles['burger-link']}\n\t\t\t\t\t>\n\t\t\t\t\t\t<OrdersItem\n\t\t\t\t\t\t\tnumber={el.number}\n\t\t\t\t\t\t\tname={el.name}\n\t\t\t\t\t\t\tingredients={el.ingredients}\n\t\t\t\t\t\t\tcreatedAt={el.createdAt}\n\t\t\t\t\t\t\tstatus={el.status}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Link>\n\t\t\t\t</li>\n\t\t\t))\n\t\t\t}\n\t\t</ul >\n\n\t);\n}\n\nexport default memo(ProfileOrders);\n","import React, { memo, useEffect } from 'react';\nimport cn from 'classnames';\nimport styles from './profile.module.css';\nimport { Switch, Route } from 'react-router-dom';\nimport NavProfile from '../../components/nav-profile/nav-profile';\nimport FormsProfile from '../../components/forms-profile/forms-profile';\nimport ProfileOrders from '../../components/profile-orders/profile-orders';\nimport { useDispatch, useSelector } from '../../hooks';\nimport { getUser } from '../../services/actions/auth';\nimport Preloader from '../../components/preloader/preloader';\n\nfunction Profile() {\n  const dispatch = useDispatch();\n  const { getUserRequest } = useSelector((store) => store.auth)\n\n  useEffect(() => {\n    dispatch(getUser());\n  }, [dispatch]);\n\n  if (getUserRequest) {\n    return (<Preloader />)\n  }\n\n  return (\n    <div className={cn(styles.main, 'pt-10', 'pl-10', 'pr-10', 'mt-10')}>\n      <NavProfile />\n      <Switch>\n        <Route path='/profile' exact={true}>\n          <FormsProfile />\n        </Route>\n        <Route path='/profile/orders' exact={true}>\n          <ProfileOrders />\n        </Route>\n        <Route>\n          <div className={styles.container}>\n            <h1> 404 Здесь ничего нет</h1>\n          </div>\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n\nexport default memo(Profile);\n","import React, { useEffect, FC } from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { refreshToken } from '../services/actions/auth';\nimport { useSelector, useDispatch } from '../hooks';\nimport Preloader from './preloader/preloader';\n\n\nexport const ProtectedRoute: FC<{\n  path: string;\n  exact?: boolean;\n}> = ({ children, ...rest }) => {\n  const dispatch = useDispatch();\n\n  const isTokenUpdated = useSelector((store) => store.auth.isTokenUpdated);\n  const tokenUpdateDate = useSelector((store) => store.auth.tokenUpdateDate);\n  const hasToken = !!localStorage.getItem('refreshToken');\n\n  useEffect(() => {\n    if (!isTokenUpdated && hasToken) {\n      dispatch(refreshToken())\n    }\n  }, [dispatch, hasToken, isTokenUpdated]);\n\n  if (hasToken && !isTokenUpdated) {\n    return <Preloader />;\n  }\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        (hasToken && tokenUpdateDate) ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/login',\n              state: { from: location }\n            }}\n          />\n        )\n      }\n    />\n  );\n}\n\n","export default __webpack_public_path__ + \"static/media/check.7341dd32.svg\";","import React, { memo } from 'react';\nimport cn from 'classnames';\nimport styles from './order-details.module.css';\nimport checkIcon from '../../images/check.svg';\nimport { useSelector } from '../../hooks';\nimport Preloader from '../preloader/preloader';\n\nconst OrderDetails = () => {\n  const { orderRequest, orderFailed, createOrder } = useSelector(\n    (store) => store.ingredients\n  );\n\n  const number = createOrder?.order.number\n\n  return (\n    <div className={cn(styles.order, 'p-15')}>\n      {orderRequest && <Preloader />}\n      {orderFailed && 'Произошла ошибка'}\n      {!orderRequest && !orderFailed && (\n        <>\n          <h1\n            className={cn(\n              styles.order__title,\n              'text',\n              'text_type_digits-large',\n              'mb-8'\n            )}\n          >\n            {number}\n          </h1>\n          <p\n            className={cn(styles.order__text, 'text', 'text_type_main-medium')}\n          >\n            {' '}\n            идентификатор заказа\n          </p>\n          <img\n            src={checkIcon}\n            alt='иконка'\n            className={cn(styles.order__image, 'mt-15', 'mb-15')}\n          />\n          <p\n            className={cn(\n              styles.order__text,\n              'text',\n              'text_type_main-default',\n              'mb-2'\n            )}\n          >\n            {' '}\n            Ваш заказ начали готовить\n          </p>\n          <p\n            className={cn(\n              styles.order__text,\n              'text',\n              'text_type_main-default',\n              'text_color_inactive'\n            )}\n          >\n            {' '}\n            Дождитесь готовности на орбитальной станции\n          </p>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default memo(OrderDetails);\n","import React, { useEffect } from 'react';\nimport {\n\tSwitch, Route, useHistory,\n\tuseLocation,\n} from 'react-router-dom';\nimport AppHeader from '../app-header/app-header';\nimport Modal from '../modal/modal';\nimport IngredientDetails from '../ingredient-details/ingredient-details';\nimport {\n\tMain,\n\tLogin,\n\tRegister,\n\tForgotPassword,\n\tResetPassword,\n\tFeed,\n\tOrder,\n\tProfile\n} from '../../pages';\nimport { ProtectedRoute } from '../protected-route';\nimport styles from './app.module.css';\nimport { getIngredients } from '../../services/actions/ingredients';\nimport { useSelector, useDispatch } from '../../hooks';\nimport OrderDetails from '../order-details/order-details';\nimport { TLocationTemplate } from '../../types';\n\nconst App = () => {\n\tconst location = useLocation<TLocationTemplate>();\n\tconsole.log(location)\n\tconst history = useHistory();\n\tlet background = (history.action === 'PUSH' || history.action === 'REPLACE') && location.state && location.state.background;\n\tconst dispatch = useDispatch();\n\tconst { loaded } = useSelector(\n\t\t(store) => store.ingredients\n\t);\n\tuseEffect(() => {\n\t\tif (!loaded) {\n\t\t\tdispatch(getIngredients());\n\t\t}\n\t}, [dispatch, loaded]);\n\n\treturn (\n\t\t<>\n\t\t\t<AppHeader />\n\t\t\t<Switch location={background || location}>\n\t\t\t\t<Route path='/' exact={true}>\n\t\t\t\t\t<Main />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/login' exact={true}>\n\t\t\t\t\t<Login />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/register' exact={true}>\n\t\t\t\t\t<Register />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/forgot-password' exact={true}>\n\t\t\t\t\t<ForgotPassword />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/reset-password' exact={true}>\n\t\t\t\t\t<ResetPassword />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/feed' exact={true}>\n\t\t\t\t\t<Feed />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/feed/:id'>\n\t\t\t\t\t<Order />\n\t\t\t\t</Route>\n\t\t\t\t<ProtectedRoute path='/profile/orders/:id' exact={true}>\n\t\t\t\t\t<Order />\n\t\t\t\t</ProtectedRoute>\n\t\t\t\t<ProtectedRoute path='/profile'>\n\t\t\t\t\t<Profile />\n\t\t\t\t</ProtectedRoute>\n\t\t\t\t<Route path='/ingredients/:id' exact={true}>\n\t\t\t\t\t<IngredientDetails />\n\t\t\t\t</Route>\n\t\t\t\t<Route>\n\t\t\t\t\t<div className={styles.container}>\n\t\t\t\t\t\t<h1> 404 Здесь ничего нет</h1>\n\t\t\t\t\t</div>\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t\t{background &&\n\t\t\t\t(<>\n\t\t\t\t\t<Route path='/' exact={true} children={<Modal><OrderDetails /></Modal>} />\n\t\t\t\t\t<Route path='/ingredients/:id' children={<Modal><IngredientDetails /></Modal>} />\n\t\t\t\t\t<ProtectedRoute path='/profile/orders/:id' children={<Modal><Order /></Modal>} />\n\t\t\t\t\t<Route path='/feed/:id' children={<Modal><Order /></Modal>} />\n\n\t\t\t\t</>\n\t\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\n  GET_PRODUCTS_REQUEST,\n  GET_PRODUCTS_SUCCESS,\n  GET_PRODUCTS_FAILED,\n  ADD_INGREDIENTS,\n  DELETE_INGREDIENT,\n  INCREASE_INGREDIENT,\n  DECREASE_INGREDIENT,\n  UPDATE_CONSTRUCTOR,\n  CREATE_ORDER_REQUEST,\n  CREATE_ORDER_SUCCESS,\n  CREATE_ORDER_FAILED,\n  GET_ORDER_REQUEST,\n  GET_ORDER_SUCCESS,\n  GET_ORDER_FAILED,\n  GET_USER_ORDER_REQUEST,\n  GET_USER_ORDER_SUCCESS,\n  GET_USER_ORDER_FAILED,\n} from '../constants/ingredietns';\nimport { TIngredient, TBurgerIngredients, TIngredientWithProductId, TOrder, TOrderInfo } from '../../types'\nimport { TIngredientsActions } from '../actions/ingredients';\n\nexport type TIngredientsState = {\n  isLoading: boolean;\n  hasError: boolean;\n  loaded: boolean;\n  allIngredients: Array<TIngredient>;\n  burgerIngredients: TBurgerIngredients;\n  currentOrder: null | TOrder;\n  createOrder: null | TOrderInfo;\n  orderRequest: boolean;\n  orderFailed: boolean\n  orderLoaded: boolean\n};\n\nconst initialState: TIngredientsState = {\n  isLoading: false,\n  hasError: false,\n  loaded: false,\n  allIngredients: [],\n  burgerIngredients: {\n    bun: null,\n    otherIngredients: [],\n    counts: {},\n  },\n  currentOrder: null,\n  createOrder: null,\n  orderRequest: false,\n  orderFailed: false,\n  orderLoaded: false\n};\n\nexport const ingredientsReducer = (state = initialState, action: TIngredientsActions): TIngredientsState => {\n  switch (action.type) {\n    case GET_PRODUCTS_REQUEST: {\n      return {\n        ...state,\n        isLoading: true,\n        hasError: false,\n      };\n    }\n    case GET_PRODUCTS_SUCCESS: {\n      return {\n        ...state,\n        hasError: false,\n        allIngredients: action.items,\n        isLoading: false,\n        loaded: true,\n      };\n    }\n    case GET_PRODUCTS_FAILED: {\n      return { ...state, hasError: true, isLoading: false };\n    }\n    case CREATE_ORDER_REQUEST: {\n      return {\n        ...state,\n        orderRequest: true,\n        orderFailed: false,\n      };\n    }\n    case CREATE_ORDER_SUCCESS: {\n      return {\n        ...state,\n        orderFailed: false,\n        createOrder: action.order,\n        orderRequest: false,\n        burgerIngredients: {\n          bun: null,\n          otherIngredients: [],\n          counts: {},\n        },\n      };\n    }\n    case CREATE_ORDER_FAILED: {\n      return { ...state, orderFailed: true, orderRequest: false };\n    }\n\n    case GET_ORDER_REQUEST: {\n      return {\n        ...state,\n        orderRequest: true,\n        orderFailed: false,\n        orderLoaded: false\n      };\n    }\n    case GET_ORDER_SUCCESS: {\n      return {\n        ...state,\n        orderFailed: false,\n        currentOrder: action.order,\n        orderRequest: false,\n        orderLoaded: true\n      };\n    }\n    case GET_ORDER_FAILED: {\n      return { ...state, orderFailed: true, orderRequest: false };\n    }\n\n    case GET_USER_ORDER_REQUEST: {\n      return {\n        ...state,\n        orderRequest: true,\n        orderFailed: false,\n        orderLoaded: false\n      };\n    }\n    case GET_USER_ORDER_SUCCESS: {\n      const data = action.order ? action.order : null\n      return {\n        ...state,\n        orderFailed: false,\n        currentOrder: data,\n        orderRequest: false,\n        orderLoaded: true\n      };\n    }\n    case GET_USER_ORDER_FAILED: {\n      return { ...state, orderFailed: true, orderRequest: false };\n    }\n\n    case ADD_INGREDIENTS: {\n      const { type } = action.item;\n      if (type === 'bun') {\n        return {\n          ...state,\n          burgerIngredients: {\n            ...state.burgerIngredients,\n            bun: action.item,\n          },\n        };\n      }\n      return {\n        ...state,\n        burgerIngredients: {\n          ...state.burgerIngredients,\n          otherIngredients: [\n            ...state.burgerIngredients.otherIngredients,\n            action.item,\n          ],\n        },\n      };\n    }\n    case DELETE_INGREDIENT: {\n      return {\n        ...state,\n        burgerIngredients: {\n          ...state.burgerIngredients,\n          otherIngredients: [\n            ...state.burgerIngredients.otherIngredients,\n          ].filter((el: TIngredientWithProductId) => el.productId !== action.id),\n        },\n      };\n    }\n    case INCREASE_INGREDIENT: {\n      const { typeItem } = action;\n      if (typeItem !== 'bun') {\n        return {\n          ...state,\n          burgerIngredients: {\n            ...state.burgerIngredients,\n            counts: {\n              ...state.burgerIngredients.counts,\n              [action.key]:\n                (state.burgerIngredients.counts[action.key] || 0) + 1,\n            },\n          },\n        };\n      } else return state;\n    }\n    case DECREASE_INGREDIENT: {\n      const { typeItem } = action;\n      if (typeItem !== 'bun') {\n        return {\n          ...state,\n          burgerIngredients: {\n            ...state.burgerIngredients,\n            counts: {\n              ...state.burgerIngredients.counts,\n              [action.key]: state.burgerIngredients.counts[action.key] - 1,\n            },\n          },\n        };\n      } else return state;\n    }\n    case UPDATE_CONSTRUCTOR: {\n      const otherIngredients = [...state.burgerIngredients.otherIngredients];\n      otherIngredients.splice(\n        action.toIndex,\n        0,\n        otherIngredients.splice(action.fromIndex, 1)[0]\n      );\n      return {\n        ...state,\n        burgerIngredients: {\n          ...state.burgerIngredients,\n          otherIngredients: otherIngredients,\n        },\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import {\n  REGISTER_REQUEST, REGISTER_SUCCESS, REGISTER_FAILED,\n  LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILED,\n  GET_USER_REQUEST, GET_USER_SUCCESS, GET_USER_FAILED,\n  UPDATE_USER_REQUEST, UPDATE_USER_SUCCESS, UPDATE_USER_FAILED,\n  FORGOT_PASSWORD_REQUEST, FORGOT_PASSWORD_SUCCESS, FORGOT_PASSWORD_FAILED,\n  RESET_PASSWORD_REQUEST, RESET_PASSWORD_SUCCESS, RESET_PASSWORD_FAILED,\n  LOGOUT_REQUEST, LOGOUT_SUCCESS, LOGOUT_FAILED,\n  REFRESH_TOKEN_REQUEST, REFRESH_TOKEN_SUCCESS, REFRESH_TOKEN_FAILED\n} from '../constants/auth';\nimport { TAuthActions } from '../actions/auth';\n\nexport type TAuthState = {\n  name: string,\n  email: string,\n  password: string,\n\n  registerRequest: boolean,\n  registerFailed: boolean,\n\n  loginRequest: boolean,\n  loginFailed: boolean,\n\n  updateUserRequest: boolean,\n  updateUserFailed: boolean,\n\n  logoutRequest: boolean,\n  logoutFailed: boolean,\n\n  getUserRequest: boolean,\n  getUserFailed: boolean,\n\n  forgotPasswordRequest: boolean,\n  forgotPasswordFailed: boolean,\n\n  isforgotPasswordRequest: boolean,\n  isforgotPasswordSaccess: boolean,\n\n  resetPasswordRequest: boolean,\n  resetPasswordFailed: boolean,\n\n  isTokenUpdated: boolean,\n  tokenUpdateDate: boolean,\n}\n\nconst initialState: TAuthState = {\n  name: '',\n  email: '',\n  password: '',\n\n  registerRequest: false,\n  registerFailed: false,\n\n  loginRequest: false,\n  loginFailed: false,\n\n  updateUserRequest: false,\n  updateUserFailed: false,\n\n  logoutRequest: false,\n  logoutFailed: false,\n\n  getUserRequest: false,\n  getUserFailed: false,\n\n  forgotPasswordRequest: false,\n  forgotPasswordFailed: false,\n\n  isforgotPasswordRequest: false,\n  isforgotPasswordSaccess: false,\n\n  resetPasswordRequest: false,\n  resetPasswordFailed: false,\n\n  isTokenUpdated: false,\n  tokenUpdateDate: false,\n};\n\nexport const authReducer = (state = initialState, action: TAuthActions): TAuthState => {\n  switch (action.type) {\n    //Регистрация\n    case REGISTER_REQUEST: {\n      return {\n        ...state,\n        registerRequest: true,\n        registerFailed: false,\n      };\n    }\n    case REGISTER_SUCCESS: {\n      return {\n        ...state,\n        registerFailed: false,\n        name: action.user.name,\n        email: action.user.email,\n        registerRequest: false,\n      };\n    }\n    case REGISTER_FAILED: {\n      return { ...state, registerFailed: true, registerRequest: false };\n    }\n    //Вход в систему\n    case LOGIN_REQUEST: {\n      return {\n        ...state,\n        loginRequest: true,\n        loginFailed: false,\n      };\n    }\n    case LOGIN_SUCCESS: {\n      return {\n        ...state,\n        loginFailed: false,\n        name: action.user.name,\n        email: action.user.email,\n        loginRequest: false,\n      };\n    }\n    case LOGIN_FAILED: {\n      return { ...state, loginFailed: true, loginRequest: false };\n    }\n    //Получение данных пользователя\n    case GET_USER_REQUEST: {\n      return {\n        ...state,\n        getUserRequest: true,\n        getUserFailed: false,\n      };\n    }\n    case GET_USER_SUCCESS: {\n      return {\n        ...state,\n        getUserFailed: false,\n        name: action.user.name,\n        email: action.user.email,\n        getUserRequest: false,\n      };\n    }\n    case GET_USER_FAILED: {\n      return { ...state, getUserFailed: true, getUserRequest: false };\n    }\n    //Изменение данных пользователя\n    case UPDATE_USER_REQUEST: {\n      return {\n        ...state,\n        updateUserRequest: true,\n        updateUserFailed: false,\n      };\n    }\n    case UPDATE_USER_SUCCESS: {\n      return {\n        ...state,\n        updateUserFailed: false,\n        name: action.user.name,\n        email: action.user.email,\n        updateUserRequest: false,\n      };\n    }\n    case UPDATE_USER_FAILED: {\n      return { ...state, updateUserFailed: true, updateUserRequest: false };\n    }\n    //Запрос на смену пароля\n    case FORGOT_PASSWORD_REQUEST: {\n      return {\n        ...state,\n        forgotPasswordRequest: true,\n        forgotPasswordFailed: false,\n        isforgotPasswordRequest: false,\n        isforgotPasswordSaccess: false,\n      };\n    }\n    case FORGOT_PASSWORD_SUCCESS: {\n      return {\n        ...state,\n        forgotPasswordRequest: false,\n        isforgotPasswordRequest: true,\n        isforgotPasswordSaccess: true\n      };\n    }\n    case FORGOT_PASSWORD_FAILED: {\n      return {\n        ...state,\n        forgotPasswordFailed: true,\n        forgotPasswordRequest: false,\n        isforgotPasswordSaccess: false,\n        isforgotPasswordRequest: true\n      };\n    }\n\n    //Смена пароля\n    case RESET_PASSWORD_REQUEST: {\n      return {\n        ...state,\n      };\n    }\n    case RESET_PASSWORD_SUCCESS: {\n      return {\n        ...state,\n      };\n    }\n    case RESET_PASSWORD_FAILED: {\n      return {\n        ...state,\n      };\n    }\n    //Выход из системы\n    case LOGOUT_REQUEST: {\n      return {\n        ...state,\n        logoutRequest: true,\n        logoutFailed: false,\n      };\n    }\n    case LOGOUT_SUCCESS: {\n      return {\n        ...state,\n        logoutFailed: false,\n        name: '',\n        email: '',\n        logoutRequest: false,\n      };\n    }\n    case LOGOUT_FAILED: {\n      return { ...state, logoutFailed: true, logoutRequest: false };\n    }\n\n    //Обновление токена\n    case REFRESH_TOKEN_REQUEST: {\n      return {\n        ...state,\n      };\n    }\n    case REFRESH_TOKEN_SUCCESS: {\n      return {\n        ...state,\n        isTokenUpdated: true,\n        tokenUpdateDate: true,\n      };\n    }\n    case REFRESH_TOKEN_FAILED: {\n      return { ...state, isTokenUpdated: true, tokenUpdateDate: false };\n    }\n\n    default: {\n      return state;\n    }\n  }\n};\n","import {\n\tWS_CONNECTION_SUCCESS,\n\tWS_CONNECTION_ERROR,\n\tWS_CONNECTION_CLOSED,\n\tWS_GET_MESSAGE\n} from '../constants/ws-actions';\nimport { TWSActionsActions } from '../actions/ws-actions';\nimport { TOrder } from '../../types';\nimport { PayloadAction } from '@reduxjs/toolkit';\n\ntype TWsReduserState = {\n\twsConnected: Boolean;\n\terror: PayloadAction | null;\n\torders: Array<TOrder>;\n\ttotal: number | null,\n\ttotalToday: number | null\n}\n\nconst initialState: TWsReduserState = {\n\twsConnected: false,\n\terror: null,\n\torders: [],\n\ttotal: null,\n\ttotalToday: null\n};\n\nexport const wsReducer = (state = initialState, action: TWSActionsActions): TWsReduserState => {\n\tswitch (action.type) {\n\t\tcase WS_CONNECTION_SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\twsConnected: true\n\t\t\t};\n\n\t\tcase WS_CONNECTION_ERROR:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\terror: action.payload,\n\t\t\t\twsConnected: false\n\t\t\t};\n\n\t\tcase WS_CONNECTION_CLOSED:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\twsConnected: false\n\t\t\t};\n\n\t\tcase WS_GET_MESSAGE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\torders: action.payload.orders,\n\t\t\t\ttotal: action.payload.total,\n\t\t\t\ttotalToday: action.payload.totalToday\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\n\n","import {\n\tWS_CONNECTION_SUCCESS_AUTH,\n\tWS_CONNECTION_ERROR_AUTH,\n\tWS_CONNECTION_CLOSED_AUTH,\n\tWS_GET_MESSAGE_AUTH\n} from '../constants/ws-actions-auth';\nimport { TWSActionsAuthActions } from '../actions/ws-actions-auth';\nimport { TOrder } from '../../types';\nimport { PayloadAction } from '@reduxjs/toolkit';\n\ntype TWsReduserAuthState = {\n\twsConnected: Boolean;\n\terror: PayloadAction | null;\n\torders: Array<TOrder>;\n\ttotal: number | null,\n\ttotalToday: number | null\n}\n\nconst initialState: TWsReduserAuthState = {\n\twsConnected: false,\n\terror: null,\n\torders: [],\n\ttotal: null,\n\ttotalToday: null\n};\n\nexport const wsReducerAuth = (state = initialState, action: TWSActionsAuthActions): TWsReduserAuthState => {\n\tswitch (action.type) {\n\t\tcase WS_CONNECTION_SUCCESS_AUTH:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\twsConnected: true\n\t\t\t};\n\n\t\tcase WS_CONNECTION_ERROR_AUTH:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\terror: action.payload,\n\t\t\t\twsConnected: false\n\t\t\t};\n\n\t\tcase WS_CONNECTION_CLOSED_AUTH:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\twsConnected: false\n\t\t\t};\n\n\t\tcase WS_GET_MESSAGE_AUTH:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\torders: action.payload.orders,\n\t\t\t\ttotal: action.payload.total,\n\t\t\t\ttotalToday: action.payload.totalToday\n\t\t\t};\n\t\t// case WS_USER_STATUS_UPDATE:\n\t\t// \treturn {\n\t\t// \t\t...state,\n\t\t// \t\tuser: action.payload\n\t\t// \t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\n\n","import { combineReducers } from 'redux';\nimport { ingredientsReducer } from './ingredients';\nimport { authReducer } from './auth';\nimport { connectRouter } from 'connected-react-router';\nimport { createBrowserHistory } from 'history';\nimport { wsReducer } from './ws-reducer';\nimport { wsReducerAuth } from './ws-reducer-auth';\n\nexport const history = createBrowserHistory();\n\nexport const rootReducer = combineReducers({\n  ingredients: ingredientsReducer,\n  auth: authReducer,\n  ws: wsReducer,\n  wsAuth: wsReducerAuth,\n  router: connectRouter(history),\n});\n","import { AnyAction, MiddlewareAPI } from 'redux';\nimport { TWSAction } from '../../types';\nimport { getCookie } from '../../utils/functions';\n\nexport const socketMiddleware = (wsUrl: string, wsActions: TWSAction, auth: boolean) => (store: MiddlewareAPI) => {\n\tlet socket: WebSocket | null = null;\n\tlet connected = false;\n\treturn (next: (i: AnyAction) => void) => (action: AnyAction) => {\n\t\tconst { dispatch } = store;\n\t\tconst { type, payload } = action;\n\t\tconst { wsInit, wsClose, wsSendMessage, onOpen, onClose, onError, onMessage } = wsActions;\n\t\tconst token = auth ? getCookie('token') : null;\n\t\tif (type === wsInit) {\n\t\t\tsocket = token\n\t\t\t\t? new WebSocket(`${wsUrl}?token=${token}`)\n\t\t\t\t: new WebSocket(`${wsUrl}`);\n\t\t}\n\t\tif (socket) {\n\t\t\tconnected = true;\n\t\t\tsocket.onopen = event => {\n\t\t\t\tdispatch({ type: onOpen, payload: event });\n\t\t\t};\n\n\t\t\tsocket.onerror = event => {\n\t\t\t\tdispatch({ type: onError, payload: event });\n\t\t\t};\n\n\t\t\tsocket.onmessage = event => {\n\t\t\t\tconst { data } = event;\n\t\t\t\tconst parsedData = JSON.parse(data);\n\t\t\t\tconst { success, ...restParsedData } = parsedData;\n\t\t\t\tdispatch({ type: onMessage, payload: restParsedData });\n\t\t\t};\n\n\t\t\tsocket.onclose = event => {\n\t\t\t\tdispatch({ type: onClose, payload: event });\n\t\t\t\tconsole.log('socket closed with code: ', event.code);\n\t\t\t\tif (!connected) {\n\t\t\t\t\tsetTimeout(() => { dispatch({ type: wsInit }) }, 1000)\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (wsClose && type === wsClose && socket) {\n\t\t\t\tsocket.close(1000, 'socket closed');\n\t\t\t\tconnected = false;\n\t\t\t}\n\n\n\t\t\tif (wsSendMessage && type === wsSendMessage && socket) {\n\t\t\t\tconst message = token ? { ...payload, token } : { ...payload };\n\t\t\t\tsocket.send(JSON.stringify(message));\n\t\t\t}\n\t\t}\n\n\t\tnext(action);\n\t};\n};\n\n","import { PayloadAction } from '@reduxjs/toolkit';\nimport { TOrders } from '../../types';\nimport {\n\tWS_CONNECTION_START,\n\tWS_CONNECTION_CLOSE,\n\tWS_SEND_MESSAGE,\n\tWS_CONNECTION_SUCCESS,\n\tWS_CONNECTION_ERROR,\n\tWS_CONNECTION_CLOSED,\n\tWS_GET_MESSAGE\n} from '../constants/ws-actions';\n\n\nexport const wsActions = {\n\twsInit: WS_CONNECTION_START,\n\twsClose: WS_CONNECTION_CLOSE,\n\twsSendMessage: WS_SEND_MESSAGE,\n\tonOpen: WS_CONNECTION_SUCCESS,\n\tonClose: WS_CONNECTION_CLOSED,\n\tonError: WS_CONNECTION_ERROR,\n\tonMessage: WS_GET_MESSAGE\n};\n\n/***/\nexport interface IWsConnectionStartAction {\n\treadonly type: typeof WS_CONNECTION_START;\n}\n\nexport interface IWsConnectionCloseAction {\n\treadonly type: typeof WS_CONNECTION_CLOSE;\n}\n\nexport interface IWsSendMessageAction {\n\treadonly type: typeof WS_SEND_MESSAGE;\n}\n\nexport interface IWsConnectionSuccessAction {\n\treadonly type: typeof WS_CONNECTION_SUCCESS;\n\tpayload: PayloadAction\n}\n\nexport interface IWsConnectionErrorAction {\n\treadonly type: typeof WS_CONNECTION_ERROR;\n\tpayload: PayloadAction\n}\n\nexport interface IWsConnectionClosedAction {\n\treadonly type: typeof WS_CONNECTION_CLOSED;\n\tpayload: PayloadAction\n}\n\nexport interface IWsGetMessageAction {\n\treadonly type: typeof WS_GET_MESSAGE;\n\tpayload: TOrders\n}\n\nexport type TWSActionsActions =\n\t| IWsConnectionStartAction\n\t| IWsConnectionCloseAction\n\t| IWsSendMessageAction\n\t| IWsConnectionSuccessAction\n\t| IWsConnectionErrorAction\n\t| IWsConnectionClosedAction\n\t| IWsGetMessageAction;","import { PayloadAction } from '@reduxjs/toolkit';\nimport { TOrders } from '../../types';\nimport {\n\tWS_CONNECTION_START_AUTH,\n\tWS_CONNECTION_CLOSE_AUTH,\n\tWS_SEND_MESSAGE_AUTH,\n\tWS_CONNECTION_SUCCESS_AUTH,\n\tWS_CONNECTION_ERROR_AUTH,\n\tWS_CONNECTION_CLOSED_AUTH,\n\tWS_GET_MESSAGE_AUTH\n} from '../constants/ws-actions-auth';\n\nexport const wsActionsAuth = {\n\twsInit: WS_CONNECTION_START_AUTH,\n\twsClose: WS_CONNECTION_CLOSE_AUTH,\n\twsSendMessage: WS_SEND_MESSAGE_AUTH,\n\tonOpen: WS_CONNECTION_SUCCESS_AUTH,\n\tonClose: WS_CONNECTION_CLOSED_AUTH,\n\tonError: WS_CONNECTION_ERROR_AUTH,\n\tonMessage: WS_GET_MESSAGE_AUTH\n};\n\n/***/\nexport interface IWsConnectionStartAuthAction {\n\treadonly type: typeof WS_CONNECTION_START_AUTH;\n}\n\nexport interface IWsConnectionCloseAuthAction {\n\treadonly type: typeof WS_CONNECTION_CLOSE_AUTH;\n}\n\nexport interface IWsSendMessageAuthAction {\n\treadonly type: typeof WS_SEND_MESSAGE_AUTH;\n}\n\nexport interface IWsConnectionSuccessAuthAction {\n\treadonly type: typeof WS_CONNECTION_SUCCESS_AUTH;\n\tpayload: PayloadAction\n}\n\nexport interface IWsConnectionErrorAuthAction {\n\treadonly type: typeof WS_CONNECTION_ERROR_AUTH;\n\tpayload: PayloadAction\n}\n\nexport interface IWsConnectionClosedAuthAction {\n\treadonly type: typeof WS_CONNECTION_CLOSED_AUTH;\n\tpayload: PayloadAction\n}\n\nexport interface IWsGetMessageAuthAction {\n\treadonly type: typeof WS_GET_MESSAGE_AUTH;\n\tpayload: TOrders\n}\n\nexport type TWSActionsAuthActions =\n\t| IWsConnectionStartAuthAction\n\t| IWsConnectionCloseAuthAction\n\t| IWsSendMessageAuthAction\n\t| IWsConnectionSuccessAuthAction\n\t| IWsConnectionErrorAuthAction\n\t| IWsConnectionClosedAuthAction\n\t| IWsGetMessageAuthAction;","import { compose, createStore, applyMiddleware } from 'redux';\nimport { rootReducer, history } from './services/reducers';\nimport { socketMiddleware } from './services/middleware';\nimport { routerMiddleware } from 'connected-react-router';\nimport thunk from 'redux-thunk';\nimport { wsActions } from './services/actions/ws-actions';\nimport { wsActionsAuth } from './services/actions/ws-actions-auth';\nimport { WS_URL, WS_URL_AUTH } from './constants/config';\n\n\ndeclare global {\n\tinterface Window {\n\t\t__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n\t}\n}\n\nexport const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n\n\nconst enhancer = composeEnhancers(\n\tapplyMiddleware(thunk, routerMiddleware(history), socketMiddleware(WS_URL, wsActions, false), socketMiddleware(WS_URL_AUTH, wsActionsAuth, true))\n);\n\nexport const store = createStore(rootReducer, enhancer);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app/app';\nimport { Provider } from 'react-redux';\nimport reportWebVitals from './reportWebVitals';\nimport { history } from './services/reducers';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { store } from './store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ConnectedRouter history={history}>\n        <App />\n      </ConnectedRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order_container__2VWNz\",\"icon\":\"order_icon__15Hmd\",\"image\":\"order_image__CR086\",\"list\":\"order_list__1VJ5K\",\"list-item\":\"order_list-item__1lYHu\",\"title\":\"order_title__3G1CO\",\"ingredient\":\"order_ingredient__3Z8wh\",\"status\":\"order_status__1nOjk\",\"info\":\"order_info__2qCj2\",\"status_color_red\":\"order_status_color_red__3Npce\",\"status_color_white\":\"order_status_color_white__3xwUd\",\"status_color_green\":\"order_status_color_green__25tAl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav-bar\":\"nav-bar_nav-bar__1hAV1\",\"link\":\"nav-bar_link__2qdpX\",\"link_active\":\"nav-bar_link_active__rrbQZ\",\"logo\":\"nav-bar_logo__1r36X\",\"menu\":\"nav-bar_menu__zDoty\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orders-item\":\"orders-item_orders-item__2GlTG\",\"orders-info\":\"orders-item_orders-info__2fpcD\",\"icon\":\"orders-item_icon__1QkN7\",\"image\":\"orders-item_image__igpiW\",\"list\":\"orders-item_list__14afS\",\"list-item\":\"orders-item_list-item__25rkz\",\"overlay\":\"orders-item_overlay__3UAKt\",\"status_color_yellow\":\"orders-item_status_color_yellow__2aJl-\",\"status_color_white\":\"orders-item_status_color_white__CG-04\",\"status_color_green\":\"orders-item_status_color_green__24Tkw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"orders-table_container__17Ids\",\"table\":\"orders-table_table__33e-8\",\"list\":\"orders-table_list__1tStR\",\"list_color_green\":\"orders-table_list_color_green__19OfI\",\"count\":\"orders-table_count__1jId5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"nav-profile_link__26boX\",\"link_active\":\"nav-profile_link_active__2qzGE\",\"list-nav\":\"nav-profile_list-nav__3kmL9\",\"nav\":\"nav-profile_nav__1QNqZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order-details_order__1Uqtf\",\"order__title\":\"order-details_order__title__352oG\",\"order__image\":\"order-details_order__image__2PAjQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login_container__3jnDm\",\"form\":\"login_form__17NvE\",\"title\":\"login_title__Dd-UM\",\"link\":\"login_link__12iao\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-constructor_container__3O6dt\",\"burger-container\":\"burger-constructor_burger-container__1zYpO\",\"burger-container_active\":\"burger-constructor_burger-container_active__1VL9e\",\"burger-container_candrop\":\"burger-constructor_burger-container_candrop__2-Tmt\",\"list\":\"burger-constructor_list__1NzHs\",\"item_without-icon\":\"burger-constructor_item_without-icon__23OV9\",\"order\":\"burger-constructor_order__3v5W3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"register_container__3uNKj\",\"form\":\"register_form__2bot4\",\"title\":\"register_title__2uf7M\",\"link\":\"register_link__3L2TH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"forgot-password_container__3AFp0\",\"form\":\"forgot-password_form__c3g_T\",\"title\":\"forgot-password_title__8WZOE\",\"link\":\"forgot-password_link__2oPps\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"reset-password_container__xrOrj\",\"form\":\"reset-password_form__Y6qkc\",\"title\":\"reset-password_title__2T1Rf\",\"link\":\"reset-password_link__3J2QL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ingredients_list__3ATMn\",\"list-item\":\"ingredients_list-item__1qIQb\",\"link\":\"ingredients_link__2lJKJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"burger-ingredient_card__2Ijuc\",\"image\":\"burger-ingredient_image__3wNXJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"feed-orders_list__20WGQ\",\"list-item\":\"feed-orders_list-item__14ZWU\",\"link\":\"feed-orders_link__1rXK8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"forms-profile_form__2KPDu\",\"buttons\":\"forms-profile_buttons__1nj1L\",\"button\":\"forms-profile_button__1agWp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"profile-orders_list__3FCpK\",\"list-item\":\"profile-orders_list-item__3CQ1P\",\"burger-link\":\"profile-orders_burger-link__2qyvy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"modal_popup__2Bekl\",\"popup__close\":\"modal_popup__close__3iwgr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mk-spinner-wrap\":\"preloader_mk-spinner-wrap__DsbAQ\",\"mk-spinner-bubbles\":\"preloader_mk-spinner-bubbles__2-z41\",\"a\":\"preloader_a__2EByE\",\"b\":\"preloader_b__31eTD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"burger-ingredients_link__YrM9C\",\"item\":\"burger-ingredients_item__1dwc2\",\"item_active\":\"burger-ingredients_item_active__2necs\",\"menu\":\"burger-ingredients_menu__LsK3t\",\"container\":\"burger-ingredients_container__SLDvw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main_main__KR-ow\",\"columns\":\"main_columns__3_esc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile_main__1zYSH\",\"container\":\"profile_container__kQ35b\"};"],"sourceRoot":""}